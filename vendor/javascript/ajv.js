import e from"uri-js";import r from"fast-deep-equal";import"./compile/ucs2length.js";import{_ as a,a as t}from"../_/193f7b55.js";import s from"json-schema-traverse";import o from"fast-json-stable-stringify";import i from"./refs/json-schema-draft-07.json.js";var l={};var n=a;l=SchemaObject;function SchemaObject(e){n.copy(e,this)}var h=l;var v={};var c=e,d=r,m=a,u=h,f=s;v=resolve;resolve.normalizeId=normalizeId;resolve.fullPath=getFullPath;resolve.url=resolveUrl;resolve.ids=resolveIds;resolve.inlineRef=inlineRef;resolve.schema=resolveSchema;
/**
 * [resolve and compile the references ($ref)]
 * @this   Ajv
 * @param  {Function} compile reference to schema compilation funciton (localCompile)
 * @param  {Object} root object with information about the root schema for the current schema
 * @param  {String} ref reference to resolve
 * @return {Object|Function} schema object (if the schema can be inlined) or validation function
 */function resolve(e,r,a){var t=this._refs[a];if("string"==typeof t){if(!this._refs[t])return resolve.call(this,e,r,t);t=this._refs[t]}t=t||this._schemas[a];if(t instanceof u)return inlineRef(t.schema,this._opts.inlineRefs)?t.schema:t.validate||this._compile(t);var s=resolveSchema.call(this,r,a);var o,i,l;if(s){o=s.schema;r=s.root;l=s.baseId}o instanceof u?i=o.validate||e.call(this,o.schema,r,void 0,l):void 0!==o&&(i=inlineRef(o,this._opts.inlineRefs)?o:e.call(this,o,r,void 0,l));return i}
/**
 * Resolve schema, its root and baseId
 * @this Ajv
 * @param  {Object} root root object with properties schema, refVal, refs
 * @param  {String} ref  reference to resolve
 * @return {Object} object with properties schema, root, baseId
 */function resolveSchema(e,r){var a=c.parse(r),t=_getFullPath(a),s=getFullPath(this._getId(e.schema));if(0===Object.keys(e.schema).length||t!==s){var o=normalizeId(t);var i=this._refs[o];if("string"==typeof i)return resolveRecursive.call(this,e,i,a);if(i instanceof u){i.validate||this._compile(i);e=i}else{i=this._schemas[o];if(!(i instanceof u))return;i.validate||this._compile(i);if(o==normalizeId(r))return{schema:i,root:e,baseId:s};e=i}if(!e.schema)return;s=getFullPath(this._getId(e.schema))}return getJsonPointer.call(this,a,s,e.schema,e)}function resolveRecursive(e,r,a){var t=resolveSchema.call(this,e,r);if(t){var s=t.schema;var o=t.baseId;e=t.root;var i=this._getId(s);i&&(o=resolveUrl(o,i));return getJsonPointer.call(this,a,o,s,e)}}var p=m.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(e,r,a,t){e.fragment=e.fragment||"";if("/"==e.fragment.slice(0,1)){var s=e.fragment.split("/");for(var o=1;o<s.length;o++){var i=s[o];if(i){i=m.unescapeFragment(i);a=a[i];if(void 0===a)break;var l;if(!p[i]){l=this._getId(a);l&&(r=resolveUrl(r,l));if(a.$ref){var n=resolveUrl(r,a.$ref);var h=resolveSchema.call(this,t,n);if(h){a=h.schema;t=h.root;r=h.baseId}}}}}return void 0!==a&&a!==t.schema?{schema:a,root:t,baseId:r}:void 0}}var y=m.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function inlineRef(e,r){return false!==r&&(void 0===r||true===r?checkNoRef(e):r?countKeys(e)<=r:void 0)}function checkNoRef(e){var r;if(Array.isArray(e))for(var a=0;a<e.length;a++){r=e[a];if("object"==typeof r&&!checkNoRef(r))return false}else for(var t in e){if("$ref"==t)return false;r=e[t];if("object"==typeof r&&!checkNoRef(r))return false}return true}function countKeys(e){var r=0,a;if(Array.isArray(e))for(var t=0;t<e.length;t++){a=e[t];"object"==typeof a&&(r+=countKeys(a));if(Infinity==r)return Infinity}else for(var s in e){if("$ref"==s)return Infinity;if(y[s])r++;else{a=e[s];"object"==typeof a&&(r+=countKeys(a)+1);if(Infinity==r)return Infinity}}return r}function getFullPath(e,r){false!==r&&(e=normalizeId(e));var a=c.parse(e);return _getFullPath(a)}function _getFullPath(e){return c.serialize(e).split("#")[0]+"#"}var g=/#\/?$/;function normalizeId(e){return e?e.replace(g,""):""}function resolveUrl(e,r){r=normalizeId(r);return c.resolve(e,r)}function resolveIds(e){var r=normalizeId(this._getId(e));var a={"":r};var t={"":getFullPath(r,false)};var s={};var o=this;f(e,{allKeys:true},(function(e,r,i,l,n,h,v){if(""!==r){var u=o._getId(e);var f=a[l];var p=t[l]+"/"+n;void 0!==v&&(p+="/"+("number"==typeof v?v:m.escapeFragment(v)));if("string"==typeof u){u=f=normalizeId(f?c.resolve(f,u):u);var y=o._refs[u];"string"==typeof y&&(y=o._refs[y]);if(y&&y.schema){if(!d(e,y.schema))throw new Error('id "'+u+'" resolves to more than one schema')}else if(u!=normalizeId(p))if("#"==u[0]){if(s[u]&&!d(e,s[u]))throw new Error('id "'+u+'" resolves to more than one schema');s[u]=e}else o._refs[u]=p}a[r]=f;t[r]=p}}));return s}var P=v;var E={};var w=P;E={Validation:errorSubclass(ValidationError),MissingRef:errorSubclass(MissingRefError)};function ValidationError(e){this.message="validation failed";this.errors=e;this.ajv=this.validation=true}MissingRefError.message=function(e,r){return"can't resolve reference "+r+" from id "+e};function MissingRefError(e,r,a){this.message=a||MissingRefError.message(e,r);this.missingRef=w.url(e,r);this.missingSchema=w.normalizeId(w.fullPath(this.missingRef))}function errorSubclass(e){e.prototype=Object.create(Error.prototype);e.prototype.constructor=e;return e}var b=E;var S={};S=function generate_validate(e,r,a){var t="";var s=true===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),i=e.self._getId(e.schema);if(e.opts.strictKeywords){var l=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(l){var n="unknown keyword: "+l;if("log"!==e.opts.strictKeywords)throw new Error(n);e.logger.warn(n)}}if(e.isTop){t+=" var validate = ";if(s){e.async=true;t+="async "}t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ";i&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" "+"/*# sourceURL="+i+" */"+" ")}if("boolean"==typeof e.schema||!(o||e.schema.$ref)){var r="false schema";var h=e.level;var v=e.dataLevel;var c=e.schema[r];var d=e.schemaPath+e.util.getProperty(r);var m=e.errSchemaPath+"/"+r;var u=!e.opts.allErrors;var f;var p="data"+(v||"");var y="valid"+h;if(false===e.schema){e.isTop?u=true:t+=" var "+y+" = false; ";var g=g||[];g.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+(f||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: {} ";false!==e.opts.messages&&(t+=" , message: 'boolean schema is false' ");e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" ");t+=" } "}else t+=" {} ";var P=t;t=g.pop();!e.compositeRule&&u?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?t+=s?" return data; ":" validate.errors = null; return true; ":t+=" var "+y+" = true; ";e.isTop&&(t+=" }; return validate; ");return t}if(e.isTop){var E=e.isTop,h=e.level=0,v=e.dataLevel=0,p="data";e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema));e.baseId=e.baseId||e.rootId;delete e.isTop;e.dataPathArr=[""];if(void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var w="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(w);e.logger.warn(w)}t+=" var vErrors = null; ";t+=" var errors = 0;     ";t+=" if (rootData === undefined) rootData = data; "}else{var h=e.level,v=e.dataLevel,p="data"+(v||"");i&&(e.baseId=e.resolve.url(e.baseId,i));if(s&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+h+" = errors;"}var y="valid"+h,u=!e.opts.allErrors,b="",S="";var f;var _=e.schema.type,R=Array.isArray(_);if(_&&e.opts.nullable&&true===e.schema.nullable)if(R)-1==_.indexOf("null")&&(_=_.concat("null"));else if("null"!=_){_=[_,"null"];R=true}if(R&&1==_.length){_=_[0];R=false}if(e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');if(true!==e.opts.extendRefs){o=false;e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"')}}e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment"));if(_){if(e.opts.coerceTypes)var j=e.util.coerceToTypes(e.opts.coerceTypes,_);var I=e.RULES.types[_];if(j||R||true===I||I&&!$shouldUseGroup(I)){var d=e.schemaPath+".type",m=e.errSchemaPath+"/type";var d=e.schemaPath+".type",m=e.errSchemaPath+"/type",k=R?"checkDataTypes":"checkDataType";t+=" if ("+e.util[k](_,p,e.opts.strictNumbers,true)+") { ";if(j){var $="dataType"+h,O="coerced"+h;t+=" var "+$+" = typeof "+p+"; var "+O+" = undefined; ";"array"==e.opts.coerceTypes&&(t+=" if ("+$+" == 'object' && Array.isArray("+p+") && "+p+".length == 1) { "+p+" = "+p+"[0]; "+$+" = typeof "+p+"; if ("+e.util.checkDataType(e.schema.type,p,e.opts.strictNumbers)+") "+O+" = "+p+"; } ");t+=" if ("+O+" !== undefined) ; ";var A=j;if(A){var x,L=-1,V=A.length-1;while(L<V){x=A[L+=1];if("string"==x)t+=" else if ("+$+" == 'number' || "+$+" == 'boolean') "+O+" = '' + "+p+"; else if ("+p+" === null) "+O+" = ''; ";else if("number"==x||"integer"==x){t+=" else if ("+$+" == 'boolean' || "+p+" === null || ("+$+" == 'string' && "+p+" && "+p+" == +"+p+" ";"integer"==x&&(t+=" && !("+p+" % 1)");t+=")) "+O+" = +"+p+"; "}else"boolean"==x?t+=" else if ("+p+" === 'false' || "+p+" === 0 || "+p+" === null) "+O+" = false; else if ("+p+" === 'true' || "+p+" === 1) "+O+" = true; ":"null"==x?t+=" else if ("+p+" === '' || "+p+" === 0 || "+p+" === false) "+O+" = null; ":"array"==e.opts.coerceTypes&&"array"==x&&(t+=" else if ("+$+" == 'string' || "+$+" == 'number' || "+$+" == 'boolean' || "+p+" == null) "+O+" = ["+p+"]; ")}}t+=" else {   ";var g=g||[];g.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+(f||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { type: '";t+=R?""+_.join(","):""+_;t+="' } ";if(false!==e.opts.messages){t+=" , message: 'should be ";t+=R?""+_.join(","):""+_;t+="' "}e.opts.verbose&&(t+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" ");t+=" } "}else t+=" {} ";var P=t;t=g.pop();!e.compositeRule&&u?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" } if ("+O+" !== undefined) {  ";var Q=v?"data"+(v-1||""):"parentData",D=v?e.dataPathArr[v]:"parentDataProperty";t+=" "+p+" = "+O+"; ";v||(t+="if ("+Q+" !== undefined)");t+=" "+Q+"["+D+"] = "+O+"; } "}else{var g=g||[];g.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+(f||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { type: '";t+=R?""+_.join(","):""+_;t+="' } ";if(false!==e.opts.messages){t+=" , message: 'should be ";t+=R?""+_.join(","):""+_;t+="' "}e.opts.verbose&&(t+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" ");t+=" } "}else t+=" {} ";var P=t;t=g.pop();!e.compositeRule&&u?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!o){t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ";if(u){t+=" } if (errors === ";t+=E?"0":"errs_"+h;t+=") { ";S+="}"}}else{var K=e.RULES;if(K){var I,q=-1,U=K.length-1;while(q<U){I=K[q+=1];if($shouldUseGroup(I)){I.type&&(t+=" if ("+e.util.checkDataType(I.type,p,e.opts.strictNumbers)+") { ");if(e.opts.useDefaults)if("object"==I.type&&e.schema.properties){var c=e.schema.properties,M=Object.keys(c);var T=M;if(T){var C,N=-1,F=T.length-1;while(N<F){C=T[N+=1];var z=c[C];if(void 0!==z.default){var H=p+e.util.getProperty(C);if(e.compositeRule){if(e.opts.strictDefaults){var w="default is ignored for: "+H;if("log"!==e.opts.strictDefaults)throw new Error(w);e.logger.warn(w)}}else{t+=" if ("+H+" === undefined ";"empty"==e.opts.useDefaults&&(t+=" || "+H+" === null || "+H+" === '' ");t+=" ) "+H+" = ";"shared"==e.opts.useDefaults?t+=" "+e.useDefault(z.default)+" ":t+=" "+JSON.stringify(z.default)+" ";t+="; "}}}}}else if("array"==I.type&&Array.isArray(e.schema.items)){var J=e.schema.items;if(J){var z,L=-1,G=J.length-1;while(L<G){z=J[L+=1];if(void 0!==z.default){var H=p+"["+L+"]";if(e.compositeRule){if(e.opts.strictDefaults){var w="default is ignored for: "+H;if("log"!==e.opts.strictDefaults)throw new Error(w);e.logger.warn(w)}}else{t+=" if ("+H+" === undefined ";"empty"==e.opts.useDefaults&&(t+=" || "+H+" === null || "+H+" === '' ");t+=" ) "+H+" = ";"shared"==e.opts.useDefaults?t+=" "+e.useDefault(z.default)+" ":t+=" "+JSON.stringify(z.default)+" ";t+="; "}}}}}var B=I.rules;if(B){var W,X=-1,Y=B.length-1;while(X<Y){W=B[X+=1];if($shouldUseRule(W)){var Z=W.code(e,W.keyword,I.type);if(Z){t+=" "+Z+" ";u&&(b+="}")}}}}if(u){t+=" "+b+" ";b=""}if(I.type){t+=" } ";if(_&&_===I.type&&!j){t+=" else { ";var d=e.schemaPath+".type",m=e.errSchemaPath+"/type";var g=g||[];g.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+(f||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { type: '";t+=R?""+_.join(","):""+_;t+="' } ";if(false!==e.opts.messages){t+=" , message: 'should be ";t+=R?""+_.join(","):""+_;t+="' "}e.opts.verbose&&(t+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" ");t+=" } "}else t+=" {} ";var P=t;t=g.pop();!e.compositeRule&&u?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" } "}}if(u){t+=" if (errors === ";t+=E?"0":"errs_"+h;t+=") { ";S+="}"}}}}}u&&(t+=" "+S+" ");if(E){if(s){t+=" if (errors === 0) return data;           ";t+=" else throw new ValidationError(vErrors); "}else{t+=" validate.errors = vErrors; ";t+=" return errors === 0;       "}t+=" }; return validate;"}else t+=" var "+y+" = errors === errs_"+h+";";function $shouldUseGroup(e){var r=e.rules;for(var a=0;a<r.length;a++)if($shouldUseRule(r[a]))return true}function $shouldUseRule(r){return void 0!==e.schema[r.keyword]||r.implements&&$ruleImplementsSomeKeyword(r)}function $ruleImplementsSomeKeyword(r){var a=r.implements;for(var t=0;t<a.length;t++)if(void 0!==e.schema[a[t]])return true}return t};var _=S;var R={};var j=P,I=a,k=b,$=o;var O=_;var A=I.ucs2length;var x=r;var L=k.Validation;R=compile;
/**
 * Compiles schema to validation function
 * @this   Ajv
 * @param  {Object} schema schema object
 * @param  {Object} root object with information about the root schema for this schema
 * @param  {Object} localRefs the hash of local references inside the schema (created by resolve.id), used for inline resolution
 * @param  {String} baseId base ID for IDs in the schema
 * @return {Function} validation function
 */function compile(e,r,a,t){var s=this,o=this._opts,i=[void 0],l={},n=[],h={},v=[],c={},d=[];r=r||{schema:e,refVal:i,refs:l};var m=checkCompiling.call(this,e,r,t);var u=this._compilations[m.index];if(m.compiling)return u.callValidate=callValidate;var f=this._formats;var p=this.RULES;try{var y=localCompile(e,r,a,t);u.validate=y;var g=u.callValidate;if(g){g.schema=y.schema;g.errors=null;g.refs=y.refs;g.refVal=y.refVal;g.root=y.root;g.$async=y.$async;o.sourceCode&&(g.source=y.source)}return y}finally{endCompiling.call(this,e,r,t)}function callValidate(){var e=u.validate;var r=e.apply(this,arguments);callValidate.errors=e.errors;return r}function localCompile(e,a,t,h){var c=!a||a&&a.schema==e;if(a.schema!=r.schema)return compile.call(s,e,a,t,h);var m=true===e.$async;var u=O({isTop:true,schema:e,isRoot:c,baseId:h,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:k.MissingRef,RULES:p,validate:O,util:I,resolve:j,resolveRef:resolveRef,usePattern:usePattern,useDefault:useDefault,useCustomRule:useCustomRule,opts:o,formats:f,logger:s.logger,self:s});u=vars(i,refValCode)+vars(n,patternCode)+vars(v,defaultCode)+vars(d,customRuleCode)+u;o.processCode&&(u=o.processCode(u,e));var y;try{var g=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",u);y=g(s,p,f,r,i,v,d,x,A,L);i[0]=y}catch(e){s.logger.error("Error compiling schema, function code:",u);throw e}y.schema=e;y.errors=null;y.refs=l;y.refVal=i;y.root=c?y:a;m&&(y.$async=true);true===o.sourceCode&&(y.source={code:u,patterns:n,defaults:v});return y}function resolveRef(e,t,n){t=j.url(e,t);var h=l[t];var v,c;if(void 0!==h){v=i[h];c="refVal["+h+"]";return resolvedRef(v,c)}if(!n&&r.refs){var d=r.refs[t];if(void 0!==d){v=r.refVal[d];c=addLocalRef(t,v);return resolvedRef(v,c)}}c=addLocalRef(t);var m=j.call(s,localCompile,r,t);if(void 0===m){var u=a&&a[t];u&&(m=j.inlineRef(u,o.inlineRefs)?u:compile.call(s,u,r,a,e))}if(void 0!==m){replaceLocalRef(t,m);return resolvedRef(m,c)}removeLocalRef(t)}function addLocalRef(e,r){var a=i.length;i[a]=r;l[e]=a;return"refVal"+a}function removeLocalRef(e){delete l[e]}function replaceLocalRef(e,r){var a=l[e];i[a]=r}function resolvedRef(e,r){return"object"==typeof e||"boolean"==typeof e?{code:r,schema:e,inline:true}:{code:r,$async:e&&!!e.$async}}function usePattern(e){var r=h[e];if(void 0===r){r=h[e]=n.length;n[r]=e}return"pattern"+r}function useDefault(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return I.toQuotedString(e);case"object":if(null===e)return"null";var r=$(e);var a=c[r];if(void 0===a){a=c[r]=v.length;v[a]=e}return"default"+a}}function useCustomRule(e,r,a,t){if(false!==s._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(a,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var l=e.definition.validateSchema;if(l){var n=l(r);if(!n){var h="keyword schema is invalid: "+s.errorsText(l.errors);if("log"!=s._opts.validateSchema)throw new Error(h);s.logger.error(h)}}}var v=e.definition.compile,c=e.definition.inline,m=e.definition.macro;var u;if(v)u=v.call(s,r,a,t);else if(m){u=m.call(s,r,a,t);false!==o.validateSchema&&s.validateSchema(u,true)}else if(c)u=c.call(s,t,e.keyword,r,a);else{u=e.definition.validate;if(!u)return}if(void 0===u)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=d.length;d[f]=u;return{code:"customRule"+f,validate:u}}}
/**
 * Checks if the schema is currently compiled
 * @this   Ajv
 * @param  {Object} schema schema to compile
 * @param  {Object} root root object
 * @param  {String} baseId base schema ID
 * @return {Object} object with properties "index" (compilation index) and "compiling" (boolean)
 */function checkCompiling(e,r,a){var t=compIndex.call(this,e,r,a);if(t>=0)return{index:t,compiling:true};t=this._compilations.length;this._compilations[t]={schema:e,root:r,baseId:a};return{index:t,compiling:false}}
/**
 * Removes the schema from the currently compiled list
 * @this   Ajv
 * @param  {Object} schema schema to compile
 * @param  {Object} root root object
 * @param  {String} baseId base schema ID
 */function endCompiling(e,r,a){var t=compIndex.call(this,e,r,a);t>=0&&this._compilations.splice(t,1)}
/**
 * Index of schema compilation in the currently compiled list
 * @this   Ajv
 * @param  {Object} schema schema to compile
 * @param  {Object} root root object
 * @param  {String} baseId base schema ID
 * @return {Integer} compilation index
 */function compIndex(e,r,a){for(var t=0;t<this._compilations.length;t++){var s=this._compilations[t];if(s.schema==e&&s.root==r&&s.baseId==a)return t}return-1}function patternCode(e,r){return"var pattern"+e+" = new RegExp("+I.toQuotedString(r[e])+");"}function defaultCode(e){return"var default"+e+" = defaults["+e+"];"}function refValCode(e,r){return void 0===r[e]?"":"var refVal"+e+" = refVal["+e+"];"}function customRuleCode(e){return"var customRule"+e+" = customRules["+e+"];"}function vars(e,r){if(!e.length)return"";var a="";for(var t=0;t<e.length;t++)a+=r(t,e);return a}var V=R;var Q={};var D=Q=function Cache(){this._cache={}};D.prototype.put=function Cache_put(e,r){this._cache[e]=r};D.prototype.get=function Cache_get(e){return this._cache[e]};D.prototype.del=function Cache_del(e){delete this._cache[e]};D.prototype.clear=function Cache_clear(){this._cache={}};var K=Q;var q={};q=function generate_ref(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.errSchemaPath+"/"+r;var n=!e.opts.allErrors;var h="data"+(o||"");var v="valid"+s;var c,d;if("#"==i||"#/"==i)if(e.isRoot){c=e.async;d="validate"}else{c=true===e.root.schema.$async;d="root.refVal[0]"}else{var m=e.resolveRef(e.baseId,i,e.isRoot);if(void 0===m){var u=e.MissingRefError.message(e.baseId,i);if("fail"==e.opts.missingRefs){e.logger.error(u);var f=f||[];f.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"$ref"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(i)+"' } ";false!==e.opts.messages&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(i)+"' ");e.opts.verbose&&(t+=" , schema: "+e.util.toQuotedString(i)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" ");t+=" } "}else t+=" {} ";var p=t;t=f.pop();!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+p+"]); ":t+=" validate.errors = ["+p+"]; return false; ":t+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";n&&(t+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,i,u);e.logger.warn(u);n&&(t+=" if (true) { ")}}else if(m.inline){var y=e.util.copy(e);y.level++;var g="valid"+y.level;y.schema=m.schema;y.schemaPath="";y.errSchemaPath=i;var P=e.validate(y).replace(/validate\.schema/g,m.code);t+=" "+P+" ";n&&(t+=" if ("+g+") { ")}else{c=true===m.$async||e.async&&false!==m.$async;d=m.code}}if(d){var f=f||[];f.push(t);t="";e.opts.passContext?t+=" "+d+".call(this, ":t+=" "+d+"( ";t+=" "+h+", (dataPath || '')";'""'!=e.errorPath&&(t+=" + "+e.errorPath);var E=o?"data"+(o-1||""):"parentData",w=o?e.dataPathArr[o]:"parentDataProperty";t+=" , "+E+" , "+w+", rootData)  ";var b=t;t=f.pop();if(c){if(!e.async)throw new Error("async schema referenced by sync schema");n&&(t+=" var "+v+"; ");t+=" try { await "+b+"; ";n&&(t+=" "+v+" = true; ");t+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ";n&&(t+=" "+v+" = false; ");t+=" } ";n&&(t+=" if ("+v+") { ")}else{t+=" if (!"+b+") { if (vErrors === null) vErrors = "+d+".errors; else vErrors = vErrors.concat("+d+".errors); errors = vErrors.length; } ";n&&(t+=" else { ")}}return t};var U=q;var M={};M=function generate_allOf(e,r,a){var t=" ";var s=e.schema[r];var o=e.schemaPath+e.util.getProperty(r);var i=e.errSchemaPath+"/"+r;var l=!e.opts.allErrors;var n=e.util.copy(e);var h="";n.level++;var v="valid"+n.level;var c=n.baseId,d=true;var m=s;if(m){var u,f=-1,p=m.length-1;while(f<p){u=m[f+=1];if(e.opts.strictKeywords?"object"==typeof u&&Object.keys(u).length>0||false===u:e.util.schemaHasRules(u,e.RULES.all)){d=false;n.schema=u;n.schemaPath=o+"["+f+"]";n.errSchemaPath=i+"/"+f;t+="  "+e.validate(n)+" ";n.baseId=c;if(l){t+=" if ("+v+") { ";h+="}"}}}}l&&(t+=d?" if (true) { ":" "+h.slice(0,-1)+" ");return t};var T=M;var C={};C=function generate_anyOf(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="valid"+s;var d="errs__"+s;var m=e.util.copy(e);var u="";m.level++;var f="valid"+m.level;var p=i.every((function(r){return e.opts.strictKeywords?"object"==typeof r&&Object.keys(r).length>0||false===r:e.util.schemaHasRules(r,e.RULES.all)}));if(p){var y=m.baseId;t+=" var "+d+" = errors; var "+c+" = false;  ";var g=e.compositeRule;e.compositeRule=m.compositeRule=true;var P=i;if(P){var E,w=-1,b=P.length-1;while(w<b){E=P[w+=1];m.schema=E;m.schemaPath=l+"["+w+"]";m.errSchemaPath=n+"/"+w;t+="  "+e.validate(m)+" ";m.baseId=y;t+=" "+c+" = "+c+" || "+f+"; if (!"+c+") { ";u+="}"}}e.compositeRule=m.compositeRule=g;t+=" "+u+" if (!"+c+") {   var err =   ";if(false!==e.createErrors){t+=" { keyword: '"+"anyOf"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: {} ";false!==e.opts.messages&&(t+=" , message: 'should match some schema in anyOf' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ");t+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ";e.opts.allErrors&&(t+=" } ")}else h&&(t+=" if (true) { ");return t};var N=C;var F={};F=function generate_comment(e,r,a){var t=" ";var s=e.schema[r];var o=e.errSchemaPath+"/"+r;var i=!e.opts.allErrors;var l=e.util.toQuotedString(s);true===e.opts.$comment?t+=" console.log("+l+");":"function"==typeof e.opts.$comment&&(t+=" self._opts.$comment("+l+", "+e.util.toQuotedString(o)+", validate.root.schema);");return t};var z=F;var H={};H=function generate_const(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="valid"+s;var d=e.opts.$data&&i&&i.$data,m;if(d){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";m="schema"+s}else m=i;d||(t+=" var schema"+s+" = validate.schema"+l+";");t+="var "+c+" = equal("+v+", schema"+s+"); if (!"+c+") {   ";var u=u||[];u.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"const"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { allowedValue: schema"+s+" } ";false!==e.opts.messages&&(t+=" , message: 'should be equal to constant' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";var f=t;t=u.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+f+"]); ":t+=" validate.errors = ["+f+"]; return false; ":t+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" }";h&&(t+=" else { ");return t};var J=H;var G={};G=function generate_contains(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="valid"+s;var d="errs__"+s;var m=e.util.copy(e);var u="";m.level++;var f="valid"+m.level;var p="i"+s,y=m.dataLevel=e.dataLevel+1,g="data"+y,P=e.baseId,E=e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||false===i:e.util.schemaHasRules(i,e.RULES.all);t+="var "+d+" = errors;var "+c+";";if(E){var w=e.compositeRule;e.compositeRule=m.compositeRule=true;m.schema=i;m.schemaPath=l;m.errSchemaPath=n;t+=" var "+f+" = false; for (var "+p+" = 0; "+p+" < "+v+".length; "+p+"++) { ";m.errorPath=e.util.getPathExpr(e.errorPath,p,e.opts.jsonPointers,true);var b=v+"["+p+"]";m.dataPathArr[y]=p;var S=e.validate(m);m.baseId=P;e.util.varOccurences(S,g)<2?t+=" "+e.util.varReplace(S,g,b)+" ":t+=" var "+g+" = "+b+"; "+S+" ";t+=" if ("+f+") break; }  ";e.compositeRule=m.compositeRule=w;t+=" "+u+" if (!"+f+") {"}else t+=" if ("+v+".length == 0) {";var _=_||[];_.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"contains"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: {} ";false!==e.opts.messages&&(t+=" , message: 'should contain a valid item' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";var R=t;t=_.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+R+"]); ":t+=" validate.errors = ["+R+"]; return false; ":t+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" } else { ";E&&(t+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ");e.opts.allErrors&&(t+=" } ");return t};var B=G;var W={};W=function generate_dependencies(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="errs__"+s;var d=e.util.copy(e);var m="";d.level++;var u="valid"+d.level;var f={},p={},y=e.opts.ownProperties;for(w in i)if("__proto__"!=w){var g=i[w];var P=Array.isArray(g)?p:f;P[w]=g}t+="var "+c+" = errors;";var E=e.errorPath;t+="var missing"+s+";";for(var w in p){P=p[w];if(P.length){t+=" if ( "+v+e.util.getProperty(w)+" !== undefined ";y&&(t+=" && Object.prototype.hasOwnProperty.call("+v+", '"+e.util.escapeQuotes(w)+"') ");if(h){t+=" && ( ";var b=P;if(b){var S,_=-1,R=b.length-1;while(_<R){S=b[_+=1];_&&(t+=" || ");var j=e.util.getProperty(S),I=v+j;t+=" ( ( "+I+" === undefined ";y&&(t+=" || ! Object.prototype.hasOwnProperty.call("+v+", '"+e.util.escapeQuotes(S)+"') ");t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?S:j)+") ) "}}t+=")) {  ";var k="missing"+s,$="' + "+k+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(E,k,true):E+" + "+k);var O=O||[];O.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"dependencies"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+$+"', depsCount: "+P.length+", deps: '"+e.util.escapeQuotes(1==P.length?P[0]:P.join(", "))+"' } ";if(false!==e.opts.messages){t+=" , message: 'should have ";1==P.length?t+="property "+e.util.escapeQuotes(P[0]):t+="properties "+e.util.escapeQuotes(P.join(", "));t+=" when property "+e.util.escapeQuotes(w)+" is present' "}e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";var A=t;t=O.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+A+"]); ":t+=" validate.errors = ["+A+"]; return false; ":t+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{t+=" ) { ";var x=P;if(x){var S,L=-1,V=x.length-1;while(L<V){S=x[L+=1];var j=e.util.getProperty(S),$=e.util.escapeQuotes(S),I=v+j;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(E,S,e.opts.jsonPointers));t+=" if ( "+I+" === undefined ";y&&(t+=" || ! Object.prototype.hasOwnProperty.call("+v+", '"+e.util.escapeQuotes(S)+"') ");t+=") {  var err =   ";if(false!==e.createErrors){t+=" { keyword: '"+"dependencies"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+$+"', depsCount: "+P.length+", deps: '"+e.util.escapeQuotes(1==P.length?P[0]:P.join(", "))+"' } ";if(false!==e.opts.messages){t+=" , message: 'should have ";1==P.length?t+="property "+e.util.escapeQuotes(P[0]):t+="properties "+e.util.escapeQuotes(P.join(", "));t+=" when property "+e.util.escapeQuotes(w)+" is present' "}e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}t+=" }   ";if(h){m+="}";t+=" else { "}}}e.errorPath=E;var Q=d.baseId;for(var w in f){var g=f[w];if(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||false===g:e.util.schemaHasRules(g,e.RULES.all)){t+=" "+u+" = true; if ( "+v+e.util.getProperty(w)+" !== undefined ";y&&(t+=" && Object.prototype.hasOwnProperty.call("+v+", '"+e.util.escapeQuotes(w)+"') ");t+=") { ";d.schema=g;d.schemaPath=l+e.util.getProperty(w);d.errSchemaPath=n+"/"+e.util.escapeFragment(w);t+="  "+e.validate(d)+" ";d.baseId=Q;t+=" }  ";if(h){t+=" if ("+u+") { ";m+="}"}}}h&&(t+="   "+m+" if ("+c+" == errors) {");return t};var X=W;var Y={};Y=function generate_enum(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="valid"+s;var d=e.opts.$data&&i&&i.$data,m;if(d){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";m="schema"+s}else m=i;var u="i"+s,f="schema"+s;d||(t+=" var "+f+" = validate.schema"+l+";");t+="var "+c+";";d&&(t+=" if (schema"+s+" === undefined) "+c+" = true; else if (!Array.isArray(schema"+s+")) "+c+" = false; else {");t+=c+" = false;for (var "+u+"=0; "+u+"<"+f+".length; "+u+"++) if (equal("+v+", "+f+"["+u+"])) { "+c+" = true; break; }";d&&(t+="  }  ");t+=" if (!"+c+") {   ";var p=p||[];p.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"enum"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { allowedValues: schema"+s+" } ";false!==e.opts.messages&&(t+=" , message: 'should be equal to one of the allowed values' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";var y=t;t=p.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+y+"]); ":t+=" validate.errors = ["+y+"]; return false; ":t+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" }";h&&(t+=" else { ");return t};var Z=Y;var ee={};ee=function generate_format(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");if(false===e.opts.format){h&&(t+=" if (true) { ");return t}var c=e.opts.$data&&i&&i.$data,d;if(c){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";d="schema"+s}else d=i;var m=e.opts.unknownFormats,u=Array.isArray(m);if(c){var f="format"+s,p="isObject"+s,y="formatType"+s;t+=" var "+f+" = formats["+d+"]; var "+p+" = typeof "+f+" == 'object' && !("+f+" instanceof RegExp) && "+f+".validate; var "+y+" = "+p+" && "+f+".type || 'string'; if ("+p+") { ";e.async&&(t+=" var async"+s+" = "+f+".async; ");t+=" "+f+" = "+f+".validate; } if (  ";c&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'string') || ");t+=" (";if("ignore"!=m){t+=" ("+d+" && !"+f+" ";u&&(t+=" && self._opts.unknownFormats.indexOf("+d+") == -1 ");t+=") || "}t+=" ("+f+" && "+y+" == '"+a+"' && !(typeof "+f+" == 'function' ? ";e.async?t+=" (async"+s+" ? await "+f+"("+v+") : "+f+"("+v+")) ":t+=" "+f+"("+v+") ";t+=" : "+f+".test("+v+"))))) {"}else{var f=e.formats[i];if(!f){if("ignore"==m){e.logger.warn('unknown format "'+i+'" ignored in schema at path "'+e.errSchemaPath+'"');h&&(t+=" if (true) { ");return t}if(u&&m.indexOf(i)>=0){h&&(t+=" if (true) { ");return t}throw new Error('unknown format "'+i+'" is used in schema at path "'+e.errSchemaPath+'"')}var p="object"==typeof f&&!(f instanceof RegExp)&&f.validate;var y=p&&f.type||"string";if(p){var g=true===f.async;f=f.validate}if(y!=a){h&&(t+=" if (true) { ");return t}if(g){if(!e.async)throw new Error("async format in sync schema");var P="formats"+e.util.getProperty(i)+".validate";t+=" if (!(await "+P+"("+v+"))) { "}else{t+=" if (! ";var P="formats"+e.util.getProperty(i);p&&(P+=".validate");t+="function"==typeof f?" "+P+"("+v+") ":" "+P+".test("+v+") ";t+=") { "}}var E=E||[];E.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"format"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { format:  ";t+=c?""+d:""+e.util.toQuotedString(i);t+="  } ";if(false!==e.opts.messages){t+=" , message: 'should match format \"";t+=c?"' + "+d+" + '":""+e.util.escapeQuotes(i);t+="\"' "}if(e.opts.verbose){t+=" , schema:  ";t+=c?"validate.schema"+l:""+e.util.toQuotedString(i);t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "}t+=" } "}else t+=" {} ";var w=t;t=E.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" } ";h&&(t+=" else { ");return t};var re=ee;var ae={};ae=function generate_if(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="valid"+s;var d="errs__"+s;var m=e.util.copy(e);m.level++;var u="valid"+m.level;var f=e.schema["then"],p=e.schema["else"],y=void 0!==f&&(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||false===f:e.util.schemaHasRules(f,e.RULES.all)),g=void 0!==p&&(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0||false===p:e.util.schemaHasRules(p,e.RULES.all)),P=m.baseId;if(y||g){var E;m.createErrors=false;m.schema=i;m.schemaPath=l;m.errSchemaPath=n;t+=" var "+d+" = errors; var "+c+" = true;  ";var w=e.compositeRule;e.compositeRule=m.compositeRule=true;t+="  "+e.validate(m)+" ";m.baseId=P;m.createErrors=true;t+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ";e.compositeRule=m.compositeRule=w;if(y){t+=" if ("+u+") {  ";m.schema=e.schema["then"];m.schemaPath=e.schemaPath+".then";m.errSchemaPath=e.errSchemaPath+"/then";t+="  "+e.validate(m)+" ";m.baseId=P;t+=" "+c+" = "+u+"; ";if(y&&g){E="ifClause"+s;t+=" var "+E+" = 'then'; "}else E="'then'";t+=" } ";g&&(t+=" else { ")}else t+=" if (!"+u+") { ";if(g){m.schema=e.schema["else"];m.schemaPath=e.schemaPath+".else";m.errSchemaPath=e.errSchemaPath+"/else";t+="  "+e.validate(m)+" ";m.baseId=P;t+=" "+c+" = "+u+"; ";if(y&&g){E="ifClause"+s;t+=" var "+E+" = 'else'; "}else E="'else'";t+=" } "}t+=" if (!"+c+") {   var err =   ";if(false!==e.createErrors){t+=" { keyword: '"+"if"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { failingKeyword: "+E+" } ";false!==e.opts.messages&&(t+=" , message: 'should match \"' + "+E+" + '\" schema' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ");t+=" }   ";h&&(t+=" else { ")}else h&&(t+=" if (true) { ");return t};var te=ae;var se={};se=function generate_items(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="valid"+s;var d="errs__"+s;var m=e.util.copy(e);var u="";m.level++;var f="valid"+m.level;var p="i"+s,y=m.dataLevel=e.dataLevel+1,g="data"+y,P=e.baseId;t+="var "+d+" = errors;var "+c+";";if(Array.isArray(i)){var E=e.schema.additionalItems;if(false===E){t+=" "+c+" = "+v+".length <= "+i.length+"; ";var w=n;n=e.errSchemaPath+"/additionalItems";t+="  if (!"+c+") {   ";var b=b||[];b.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"additionalItems"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { limit: "+i.length+" } ";false!==e.opts.messages&&(t+=" , message: 'should NOT have more than "+i.length+" items' ");e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";var S=t;t=b.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" } ";n=w;if(h){u+="}";t+=" else { "}}var _=i;if(_){var R,j=-1,I=_.length-1;while(j<I){R=_[j+=1];if(e.opts.strictKeywords?"object"==typeof R&&Object.keys(R).length>0||false===R:e.util.schemaHasRules(R,e.RULES.all)){t+=" "+f+" = true; if ("+v+".length > "+j+") { ";var k=v+"["+j+"]";m.schema=R;m.schemaPath=l+"["+j+"]";m.errSchemaPath=n+"/"+j;m.errorPath=e.util.getPathExpr(e.errorPath,j,e.opts.jsonPointers,true);m.dataPathArr[y]=j;var $=e.validate(m);m.baseId=P;e.util.varOccurences($,g)<2?t+=" "+e.util.varReplace($,g,k)+" ":t+=" var "+g+" = "+k+"; "+$+" ";t+=" }  ";if(h){t+=" if ("+f+") { ";u+="}"}}}}if("object"==typeof E&&(e.opts.strictKeywords?"object"==typeof E&&Object.keys(E).length>0||false===E:e.util.schemaHasRules(E,e.RULES.all))){m.schema=E;m.schemaPath=e.schemaPath+".additionalItems";m.errSchemaPath=e.errSchemaPath+"/additionalItems";t+=" "+f+" = true; if ("+v+".length > "+i.length+") {  for (var "+p+" = "+i.length+"; "+p+" < "+v+".length; "+p+"++) { ";m.errorPath=e.util.getPathExpr(e.errorPath,p,e.opts.jsonPointers,true);var k=v+"["+p+"]";m.dataPathArr[y]=p;var $=e.validate(m);m.baseId=P;e.util.varOccurences($,g)<2?t+=" "+e.util.varReplace($,g,k)+" ":t+=" var "+g+" = "+k+"; "+$+" ";h&&(t+=" if (!"+f+") break; ");t+=" } }  ";if(h){t+=" if ("+f+") { ";u+="}"}}}else if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||false===i:e.util.schemaHasRules(i,e.RULES.all)){m.schema=i;m.schemaPath=l;m.errSchemaPath=n;t+="  for (var "+p+" = "+0+"; "+p+" < "+v+".length; "+p+"++) { ";m.errorPath=e.util.getPathExpr(e.errorPath,p,e.opts.jsonPointers,true);var k=v+"["+p+"]";m.dataPathArr[y]=p;var $=e.validate(m);m.baseId=P;e.util.varOccurences($,g)<2?t+=" "+e.util.varReplace($,g,k)+" ":t+=" var "+g+" = "+k+"; "+$+" ";h&&(t+=" if (!"+f+") break; ");t+=" }"}h&&(t+=" "+u+" if ("+d+" == errors) {");return t};var oe=se;var ie={};ie=function generate__limit(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v;var c="data"+(o||"");var d=e.opts.$data&&i&&i.$data,m;if(d){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";m="schema"+s}else m=i;var u="maximum"==r,f=u?"exclusiveMaximum":"exclusiveMinimum",p=e.schema[f],y=e.opts.$data&&p&&p.$data,g=u?"<":">",P=u?">":"<",v=void 0;if(!(d||"number"==typeof i||void 0===i))throw new Error(r+" must be number");if(!(y||void 0===p||"number"==typeof p||"boolean"==typeof p))throw new Error(f+" must be number or boolean");if(y){var E=e.util.getData(p.$data,o,e.dataPathArr),w="exclusive"+s,b="exclType"+s,S="exclIsNumber"+s,_="op"+s,R="' + "+_+" + '";t+=" var schemaExcl"+s+" = "+E+"; ";E="schemaExcl"+s;t+=" var "+w+"; var "+b+" = typeof "+E+"; if ("+b+" != 'boolean' && "+b+" != 'undefined' && "+b+" != 'number') { ";var v=f;var j=j||[];j.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+(v||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: {} ";false!==e.opts.messages&&(t+=" , message: '"+f+" should be boolean' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" ");t+=" } "}else t+=" {} ";var I=t;t=j.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" } else if ( ";d&&(t+=" ("+m+" !== undefined && typeof "+m+" != 'number') || ");t+=" "+b+" == 'number' ? ( ("+w+" = "+m+" === undefined || "+E+" "+g+"= "+m+") ? "+c+" "+P+"= "+E+" : "+c+" "+P+" "+m+" ) : ( ("+w+" = "+E+" === true) ? "+c+" "+P+"= "+m+" : "+c+" "+P+" "+m+" ) || "+c+" !== "+c+") { var op"+s+" = "+w+" ? '"+g+"' : '"+g+"='; ";if(void 0===i){v=f;n=e.errSchemaPath+"/"+f;m=E;d=y}}else{var S="number"==typeof p,R=g;if(S&&d){var _="'"+R+"'";t+=" if ( ";d&&(t+=" ("+m+" !== undefined && typeof "+m+" != 'number') || ");t+=" ( "+m+" === undefined || "+p+" "+g+"= "+m+" ? "+c+" "+P+"= "+p+" : "+c+" "+P+" "+m+" ) || "+c+" !== "+c+") { "}else{if(S&&void 0===i){w=true;v=f;n=e.errSchemaPath+"/"+f;m=p;P+="="}else{S&&(m=Math[u?"min":"max"](p,i));if(p===(!S||m)){w=true;v=f;n=e.errSchemaPath+"/"+f;P+="="}else{w=false;R+="="}}var _="'"+R+"'";t+=" if ( ";d&&(t+=" ("+m+" !== undefined && typeof "+m+" != 'number') || ");t+=" "+c+" "+P+" "+m+" || "+c+" !== "+c+") { "}}v=v||r;var j=j||[];j.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+(v||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { comparison: "+_+", limit: "+m+", exclusive: "+w+" } ";if(false!==e.opts.messages){t+=" , message: 'should be "+R+" ";t+=d?"' + "+m:m+"'"}if(e.opts.verbose){t+=" , schema:  ";t+=d?"validate.schema"+l:""+i;t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "}t+=" } "}else t+=" {} ";var I=t;t=j.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" } ";h&&(t+=" else { ");return t};var le=ie;var ne={};ne=function generate__limitItems(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v;var c="data"+(o||"");var d=e.opts.$data&&i&&i.$data,m;if(d){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";m="schema"+s}else m=i;if(!(d||"number"==typeof i))throw new Error(r+" must be number");var u="maxItems"==r?">":"<";t+="if ( ";d&&(t+=" ("+m+" !== undefined && typeof "+m+" != 'number') || ");t+=" "+c+".length "+u+" "+m+") { ";var v=r;var f=f||[];f.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+(v||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { limit: "+m+" } ";if(false!==e.opts.messages){t+=" , message: 'should NOT have ";t+="maxItems"==r?"more":"fewer";t+=" than ";t+=d?"' + "+m+" + '":""+i;t+=" items' "}if(e.opts.verbose){t+=" , schema:  ";t+=d?"validate.schema"+l:""+i;t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "}t+=" } "}else t+=" {} ";var p=t;t=f.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+p+"]); ":t+=" validate.errors = ["+p+"]; return false; ":t+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+="} ";h&&(t+=" else { ");return t};var he=ne;var ve={};ve=function generate__limitLength(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v;var c="data"+(o||"");var d=e.opts.$data&&i&&i.$data,m;if(d){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";m="schema"+s}else m=i;if(!(d||"number"==typeof i))throw new Error(r+" must be number");var u="maxLength"==r?">":"<";t+="if ( ";d&&(t+=" ("+m+" !== undefined && typeof "+m+" != 'number') || ");false===e.opts.unicode?t+=" "+c+".length ":t+=" ucs2length("+c+") ";t+=" "+u+" "+m+") { ";var v=r;var f=f||[];f.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+(v||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { limit: "+m+" } ";if(false!==e.opts.messages){t+=" , message: 'should NOT be ";t+="maxLength"==r?"longer":"shorter";t+=" than ";t+=d?"' + "+m+" + '":""+i;t+=" characters' "}if(e.opts.verbose){t+=" , schema:  ";t+=d?"validate.schema"+l:""+i;t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "}t+=" } "}else t+=" {} ";var p=t;t=f.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+p+"]); ":t+=" validate.errors = ["+p+"]; return false; ":t+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+="} ";h&&(t+=" else { ");return t};var ce=ve;var de={};de=function generate__limitProperties(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v;var c="data"+(o||"");var d=e.opts.$data&&i&&i.$data,m;if(d){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";m="schema"+s}else m=i;if(!(d||"number"==typeof i))throw new Error(r+" must be number");var u="maxProperties"==r?">":"<";t+="if ( ";d&&(t+=" ("+m+" !== undefined && typeof "+m+" != 'number') || ");t+=" Object.keys("+c+").length "+u+" "+m+") { ";var v=r;var f=f||[];f.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+(v||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { limit: "+m+" } ";if(false!==e.opts.messages){t+=" , message: 'should NOT have ";t+="maxProperties"==r?"more":"fewer";t+=" than ";t+=d?"' + "+m+" + '":""+i;t+=" properties' "}if(e.opts.verbose){t+=" , schema:  ";t+=d?"validate.schema"+l:""+i;t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "}t+=" } "}else t+=" {} ";var p=t;t=f.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+p+"]); ":t+=" validate.errors = ["+p+"]; return false; ":t+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+="} ";h&&(t+=" else { ");return t};var me=de;var ue={};ue=function generate_multipleOf(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c=e.opts.$data&&i&&i.$data,d;if(c){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";d="schema"+s}else d=i;if(!(c||"number"==typeof i))throw new Error(r+" must be number");t+="var division"+s+";if (";c&&(t+=" "+d+" !== undefined && ( typeof "+d+" != 'number' || ");t+=" (division"+s+" = "+v+" / "+d+", ";e.opts.multipleOfPrecision?t+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":t+=" division"+s+" !== parseInt(division"+s+") ";t+=" ) ";c&&(t+="  )  ");t+=" ) {   ";var m=m||[];m.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"multipleOf"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { multipleOf: "+d+" } ";if(false!==e.opts.messages){t+=" , message: 'should be multiple of ";t+=c?"' + "+d:d+"'"}if(e.opts.verbose){t+=" , schema:  ";t+=c?"validate.schema"+l:""+i;t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "}t+=" } "}else t+=" {} ";var u=t;t=m.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+u+"]); ":t+=" validate.errors = ["+u+"]; return false; ":t+=" var err = "+u+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+="} ";h&&(t+=" else { ");return t};var fe=ue;var pe={};pe=function generate_not(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="errs__"+s;var d=e.util.copy(e);d.level++;var m="valid"+d.level;if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||false===i:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i;d.schemaPath=l;d.errSchemaPath=n;t+=" var "+c+" = errors;  ";var u=e.compositeRule;e.compositeRule=d.compositeRule=true;d.createErrors=false;var f;if(d.opts.allErrors){f=d.opts.allErrors;d.opts.allErrors=false}t+=" "+e.validate(d)+" ";d.createErrors=true;f&&(d.opts.allErrors=f);e.compositeRule=d.compositeRule=u;t+=" if ("+m+") {   ";var p=p||[];p.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"not"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: {} ";false!==e.opts.messages&&(t+=" , message: 'should NOT be valid' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";var y=t;t=p.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+y+"]); ":t+=" validate.errors = ["+y+"]; return false; ":t+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ";e.opts.allErrors&&(t+=" } ")}else{t+="  var err =   ";if(false!==e.createErrors){t+=" { keyword: '"+"not"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: {} ";false!==e.opts.messages&&(t+=" , message: 'should NOT be valid' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";h&&(t+=" if (false) { ")}return t};var ye=pe;var ge={};ge=function generate_oneOf(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="valid"+s;var d="errs__"+s;var m=e.util.copy(e);var u="";m.level++;var f="valid"+m.level;var p=m.baseId,y="prevValid"+s,g="passingSchemas"+s;t+="var "+d+" = errors , "+y+" = false , "+c+" = false , "+g+" = null; ";var P=e.compositeRule;e.compositeRule=m.compositeRule=true;var E=i;if(E){var w,b=-1,S=E.length-1;while(b<S){w=E[b+=1];if(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||false===w:e.util.schemaHasRules(w,e.RULES.all)){m.schema=w;m.schemaPath=l+"["+b+"]";m.errSchemaPath=n+"/"+b;t+="  "+e.validate(m)+" ";m.baseId=p}else t+=" var "+f+" = true; ";if(b){t+=" if ("+f+" && "+y+") { "+c+" = false; "+g+" = ["+g+", "+b+"]; } else { ";u+="}"}t+=" if ("+f+") { "+c+" = "+y+" = true; "+g+" = "+b+"; }"}}e.compositeRule=m.compositeRule=P;t+=u+"if (!"+c+") {   var err =   ";if(false!==e.createErrors){t+=" { keyword: '"+"oneOf"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { passingSchemas: "+g+" } ";false!==e.opts.messages&&(t+=" , message: 'should match exactly one schema in oneOf' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ");t+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }";e.opts.allErrors&&(t+=" } ");return t};var Pe=ge;var Ee={};Ee=function generate_pattern(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c=e.opts.$data&&i&&i.$data,d;if(c){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";d="schema"+s}else d=i;var m=c?"(new RegExp("+d+"))":e.usePattern(i);t+="if ( ";c&&(t+=" ("+d+" !== undefined && typeof "+d+" != 'string') || ");t+=" !"+m+".test("+v+") ) {   ";var u=u||[];u.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"pattern"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { pattern:  ";t+=c?""+d:""+e.util.toQuotedString(i);t+="  } ";if(false!==e.opts.messages){t+=" , message: 'should match pattern \"";t+=c?"' + "+d+" + '":""+e.util.escapeQuotes(i);t+="\"' "}if(e.opts.verbose){t+=" , schema:  ";t+=c?"validate.schema"+l:""+e.util.toQuotedString(i);t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "}t+=" } "}else t+=" {} ";var f=t;t=u.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+f+"]); ":t+=" validate.errors = ["+f+"]; return false; ":t+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+="} ";h&&(t+=" else { ");return t};var we=Ee;var be={};be=function generate_properties(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="errs__"+s;var d=e.util.copy(e);var m="";d.level++;var u="valid"+d.level;var f="key"+s,p="idx"+s,y=d.dataLevel=e.dataLevel+1,g="data"+y,P="dataProperties"+s;var E=Object.keys(i||{}).filter(notProto),w=e.schema.patternProperties||{},b=Object.keys(w).filter(notProto),S=e.schema.additionalProperties,_=E.length||b.length,R=false===S,j="object"==typeof S&&Object.keys(S).length,I=e.opts.removeAdditional,k=R||j||I,$=e.opts.ownProperties,O=e.baseId;var A=e.schema.required;if(A&&!(e.opts.$data&&A.$data)&&A.length<e.opts.loopRequired)var x=e.util.toHash(A);function notProto(e){return"__proto__"!==e}t+="var "+c+" = errors;var "+u+" = true;";$&&(t+=" var "+P+" = undefined;");if(k){t+=$?" "+P+" = "+P+" || Object.keys("+v+"); for (var "+p+"=0; "+p+"<"+P+".length; "+p+"++) { var "+f+" = "+P+"["+p+"]; ":" for (var "+f+" in "+v+") { ";if(_){t+=" var isAdditional"+s+" = !(false ";if(E.length)if(E.length>8)t+=" || validate.schema"+l+".hasOwnProperty("+f+") ";else{var L=E;if(L){var V,Q=-1,D=L.length-1;while(Q<D){V=L[Q+=1];t+=" || "+f+" == "+e.util.toQuotedString(V)+" "}}}if(b.length){var K=b;if(K){var q,U=-1,M=K.length-1;while(U<M){q=K[U+=1];t+=" || "+e.usePattern(q)+".test("+f+") "}}}t+=" ); if (isAdditional"+s+") { "}if("all"==I)t+=" delete "+v+"["+f+"]; ";else{var T=e.errorPath;var C="' + "+f+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers));if(R)if(I)t+=" delete "+v+"["+f+"]; ";else{t+=" "+u+" = false; ";var N=n;n=e.errSchemaPath+"/additionalProperties";var F=F||[];F.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"additionalProperties"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { additionalProperty: '"+C+"' } ";if(false!==e.opts.messages){t+=" , message: '";e.opts._errorDataPathProperty?t+="is an invalid additional property":t+="should NOT have additional properties";t+="' "}e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";var z=t;t=F.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+z+"]); ":t+=" validate.errors = ["+z+"]; return false; ":t+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";n=N;h&&(t+=" break; ")}else if(j)if("failing"==I){t+=" var "+c+" = errors;  ";var H=e.compositeRule;e.compositeRule=d.compositeRule=true;d.schema=S;d.schemaPath=e.schemaPath+".additionalProperties";d.errSchemaPath=e.errSchemaPath+"/additionalProperties";d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);var J=v+"["+f+"]";d.dataPathArr[y]=f;var G=e.validate(d);d.baseId=O;e.util.varOccurences(G,g)<2?t+=" "+e.util.varReplace(G,g,J)+" ":t+=" var "+g+" = "+J+"; "+G+" ";t+=" if (!"+u+") { errors = "+c+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+v+"["+f+"]; }  ";e.compositeRule=d.compositeRule=H}else{d.schema=S;d.schemaPath=e.schemaPath+".additionalProperties";d.errSchemaPath=e.errSchemaPath+"/additionalProperties";d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);var J=v+"["+f+"]";d.dataPathArr[y]=f;var G=e.validate(d);d.baseId=O;e.util.varOccurences(G,g)<2?t+=" "+e.util.varReplace(G,g,J)+" ":t+=" var "+g+" = "+J+"; "+G+" ";h&&(t+=" if (!"+u+") break; ")}e.errorPath=T}_&&(t+=" } ");t+=" }  ";if(h){t+=" if ("+u+") { ";m+="}"}}var B=e.opts.useDefaults&&!e.compositeRule;if(E.length){var W=E;if(W){var V,X=-1,Y=W.length-1;while(X<Y){V=W[X+=1];var Z=i[V];if(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0||false===Z:e.util.schemaHasRules(Z,e.RULES.all)){var ee=e.util.getProperty(V),J=v+ee,re=B&&void 0!==Z.default;d.schema=Z;d.schemaPath=l+ee;d.errSchemaPath=n+"/"+e.util.escapeFragment(V);d.errorPath=e.util.getPath(e.errorPath,V,e.opts.jsonPointers);d.dataPathArr[y]=e.util.toQuotedString(V);var G=e.validate(d);d.baseId=O;if(e.util.varOccurences(G,g)<2){G=e.util.varReplace(G,g,J);var ae=J}else{var ae=g;t+=" var "+g+" = "+J+"; "}if(re)t+=" "+G+" ";else{if(x&&x[V]){t+=" if ( "+ae+" === undefined ";$&&(t+=" || ! Object.prototype.hasOwnProperty.call("+v+", '"+e.util.escapeQuotes(V)+"') ");t+=") { "+u+" = false; ";var T=e.errorPath,N=n,te=e.util.escapeQuotes(V);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(T,V,e.opts.jsonPointers));n=e.errSchemaPath+"/required";var F=F||[];F.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+te+"' } ";if(false!==e.opts.messages){t+=" , message: '";e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+te+"\\'";t+="' "}e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";var z=t;t=F.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+z+"]); ":t+=" validate.errors = ["+z+"]; return false; ":t+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";n=N;e.errorPath=T;t+=" } else { "}else if(h){t+=" if ( "+ae+" === undefined ";$&&(t+=" || ! Object.prototype.hasOwnProperty.call("+v+", '"+e.util.escapeQuotes(V)+"') ");t+=") { "+u+" = true; } else { "}else{t+=" if ("+ae+" !== undefined ";$&&(t+=" &&   Object.prototype.hasOwnProperty.call("+v+", '"+e.util.escapeQuotes(V)+"') ");t+=" ) { "}t+=" "+G+" } "}}if(h){t+=" if ("+u+") { ";m+="}"}}}}if(b.length){var se=b;if(se){var q,oe=-1,ie=se.length-1;while(oe<ie){q=se[oe+=1];var Z=w[q];if(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0||false===Z:e.util.schemaHasRules(Z,e.RULES.all)){d.schema=Z;d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(q);d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(q);t+=$?" "+P+" = "+P+" || Object.keys("+v+"); for (var "+p+"=0; "+p+"<"+P+".length; "+p+"++) { var "+f+" = "+P+"["+p+"]; ":" for (var "+f+" in "+v+") { ";t+=" if ("+e.usePattern(q)+".test("+f+")) { ";d.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);var J=v+"["+f+"]";d.dataPathArr[y]=f;var G=e.validate(d);d.baseId=O;e.util.varOccurences(G,g)<2?t+=" "+e.util.varReplace(G,g,J)+" ":t+=" var "+g+" = "+J+"; "+G+" ";h&&(t+=" if (!"+u+") break; ");t+=" } ";h&&(t+=" else "+u+" = true; ");t+=" }  ";if(h){t+=" if ("+u+") { ";m+="}"}}}}}h&&(t+=" "+m+" if ("+c+" == errors) {");return t};var Se=be;var _e={};_e=function generate_propertyNames(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="errs__"+s;var d=e.util.copy(e);var m="";d.level++;var u="valid"+d.level;t+="var "+c+" = errors;";if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||false===i:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i;d.schemaPath=l;d.errSchemaPath=n;var f="key"+s,p="idx"+s,y="i"+s,g="' + "+f+" + '",P=d.dataLevel=e.dataLevel+1,E="data"+P,w="dataProperties"+s,b=e.opts.ownProperties,S=e.baseId;b&&(t+=" var "+w+" = undefined; ");t+=b?" "+w+" = "+w+" || Object.keys("+v+"); for (var "+p+"=0; "+p+"<"+w+".length; "+p+"++) { var "+f+" = "+w+"["+p+"]; ":" for (var "+f+" in "+v+") { ";t+=" var startErrs"+s+" = errors; ";var _=f;var R=e.compositeRule;e.compositeRule=d.compositeRule=true;var j=e.validate(d);d.baseId=S;e.util.varOccurences(j,E)<2?t+=" "+e.util.varReplace(j,E,_)+" ":t+=" var "+E+" = "+_+"; "+j+" ";e.compositeRule=d.compositeRule=R;t+=" if (!"+u+") { for (var "+y+"=startErrs"+s+"; "+y+"<errors; "+y+"++) { vErrors["+y+"].propertyName = "+f+"; }   var err =   ";if(false!==e.createErrors){t+=" { keyword: '"+"propertyNames"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { propertyName: '"+g+"' } ";false!==e.opts.messages&&(t+=" , message: 'property name \\'"+g+"\\' is invalid' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ");h&&(t+=" break; ");t+=" } }"}h&&(t+=" "+m+" if ("+c+" == errors) {");return t};var Re=_e;var je={};je=function generate_required(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="valid"+s;var d=e.opts.$data&&i&&i.$data,m;if(d){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";m="schema"+s}else m=i;var u="schema"+s;if(!d)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[];var p=i;if(p){var y,g=-1,P=p.length-1;while(g<P){y=p[g+=1];var E=e.schema.properties[y];E&&(e.opts.strictKeywords?"object"==typeof E&&Object.keys(E).length>0||false===E:e.util.schemaHasRules(E,e.RULES.all))||(f[f.length]=y)}}}else var f=i;if(d||f.length){var w=e.errorPath,b=d||f.length>=e.opts.loopRequired,S=e.opts.ownProperties;if(h){t+=" var missing"+s+"; ";if(b){d||(t+=" var "+u+" = validate.schema"+l+"; ");var _="i"+s,R="schema"+s+"["+_+"]",j="' + "+R+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,R,e.opts.jsonPointers));t+=" var "+c+" = true; ";d&&(t+=" if (schema"+s+" === undefined) "+c+" = true; else if (!Array.isArray(schema"+s+")) "+c+" = false; else {");t+=" for (var "+_+" = 0; "+_+" < "+u+".length; "+_+"++) { "+c+" = "+v+"["+u+"["+_+"]] !== undefined ";S&&(t+=" &&   Object.prototype.hasOwnProperty.call("+v+", "+u+"["+_+"]) ");t+="; if (!"+c+") break; } ";d&&(t+="  }  ");t+="  if (!"+c+") {   ";var I=I||[];I.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+j+"' } ";if(false!==e.opts.messages){t+=" , message: '";e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+j+"\\'";t+="' "}e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";var k=t;t=I.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+k+"]); ":t+=" validate.errors = ["+k+"]; return false; ":t+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" } else { "}else{t+=" if ( ";var $=f;if($){var O,_=-1,A=$.length-1;while(_<A){O=$[_+=1];_&&(t+=" || ");var x=e.util.getProperty(O),L=v+x;t+=" ( ( "+L+" === undefined ";S&&(t+=" || ! Object.prototype.hasOwnProperty.call("+v+", '"+e.util.escapeQuotes(O)+"') ");t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:x)+") ) "}}t+=") {  ";var R="missing"+s,j="' + "+R+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,R,true):w+" + "+R);var I=I||[];I.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+j+"' } ";if(false!==e.opts.messages){t+=" , message: '";e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+j+"\\'";t+="' "}e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";var k=t;t=I.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+k+"]); ":t+=" validate.errors = ["+k+"]; return false; ":t+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" } else { "}}else if(b){d||(t+=" var "+u+" = validate.schema"+l+"; ");var _="i"+s,R="schema"+s+"["+_+"]",j="' + "+R+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,R,e.opts.jsonPointers));if(d){t+=" if ("+u+" && !Array.isArray("+u+")) {  var err =   ";if(false!==e.createErrors){t+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+j+"' } ";if(false!==e.opts.messages){t+=" , message: '";e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+j+"\\'";t+="' "}e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+u+" !== undefined) { "}t+=" for (var "+_+" = 0; "+_+" < "+u+".length; "+_+"++) { if ("+v+"["+u+"["+_+"]] === undefined ";S&&(t+=" || ! Object.prototype.hasOwnProperty.call("+v+", "+u+"["+_+"]) ");t+=") {  var err =   ";if(false!==e.createErrors){t+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+j+"' } ";if(false!==e.opts.messages){t+=" , message: '";e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+j+"\\'";t+="' "}e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ";d&&(t+="  }  ")}else{var V=f;if(V){var O,Q=-1,D=V.length-1;while(Q<D){O=V[Q+=1];var x=e.util.getProperty(O),j=e.util.escapeQuotes(O),L=v+x;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,O,e.opts.jsonPointers));t+=" if ( "+L+" === undefined ";S&&(t+=" || ! Object.prototype.hasOwnProperty.call("+v+", '"+e.util.escapeQuotes(O)+"') ");t+=") {  var err =   ";if(false!==e.createErrors){t+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+j+"' } ";if(false!==e.opts.messages){t+=" , message: '";e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+j+"\\'";t+="' "}e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" ");t+=" } "}else t+=" {} ";t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}e.errorPath=w}else h&&(t+=" if (true) {");return t};var Ie=je;var ke={};ke=function generate_uniqueItems(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v="data"+(o||"");var c="valid"+s;var d=e.opts.$data&&i&&i.$data,m;if(d){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";m="schema"+s}else m=i;if((i||d)&&false!==e.opts.uniqueItems){d&&(t+=" var "+c+"; if ("+m+" === false || "+m+" === undefined) "+c+" = true; else if (typeof "+m+" != 'boolean') "+c+" = false; else { ");t+=" var i = "+v+".length , "+c+" = true , j; if (i > 1) { ";var u=e.schema.items&&e.schema.items.type,f=Array.isArray(u);if(!u||"object"==u||"array"==u||f&&(u.indexOf("object")>=0||u.indexOf("array")>=0))t+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+v+"[i], "+v+"[j])) { "+c+" = false; break outer; } } } ";else{t+=" var itemIndices = {}, item; for (;i--;) { var item = "+v+"[i]; ";var p="checkDataType"+(f?"s":"");t+=" if ("+e.util[p](u,"item",e.opts.strictNumbers,true)+") continue; ";f&&(t+=" if (typeof item == 'string') item = '\"' + item; ");t+=" if (typeof itemIndices[item] == 'number') { "+c+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}t+=" } ";d&&(t+="  }  ");t+=" if (!"+c+") {   ";var y=y||[];y.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+"uniqueItems"+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { i: i, j: j } ";false!==e.opts.messages&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' ");if(e.opts.verbose){t+=" , schema:  ";t+=d?"validate.schema"+l:""+i;t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "}t+=" } "}else t+=" {} ";var g=t;t=y.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+g+"]); ":t+=" validate.errors = ["+g+"]; return false; ":t+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";t+=" } ";h&&(t+=" else { ")}else h&&(t+=" if (true) { ");return t};var $e=ke;var Oe={};Oe={$ref:U,allOf:T,anyOf:N,$comment:z,const:J,contains:B,dependencies:X,enum:Z,format:re,if:te,items:oe,maximum:le,minimum:le,maxItems:he,minItems:he,maxLength:ce,minLength:ce,maxProperties:me,minProperties:me,multipleOf:fe,not:ye,oneOf:Pe,pattern:we,properties:Se,propertyNames:Re,required:Ie,uniqueItems:$e,validate:_};var Ae=Oe;var xe={};var Le=Ae,Ve=a.toHash;xe=function rules(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}];var r=["type","$comment"];var a=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"];var t=["number","integer","string","array","object","boolean","null"];e.all=Ve(r);e.types=Ve(t);e.forEach((function(a){a.rules=a.rules.map((function(a){var t;if("object"==typeof a){var s=Object.keys(a)[0];t=a[s];a=s;t.forEach((function(a){r.push(a);e.all[a]=true}))}r.push(a);var o=e.all[a]={keyword:a,code:Le[a],implements:t};return o}));e.all.$comment={keyword:"$comment",code:Le.$comment};a.type&&(e.types[a.type]=a)}));e.keywords=Ve(r.concat(a));e.custom={};return e};var Qe=xe;var De={};var Ke=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];De=function(e,r){for(var a=0;a<r.length;a++){e=JSON.parse(JSON.stringify(e));var t=r[a].split("/");var s=e;var o;for(o=1;o<t.length;o++)s=s[t[o]];for(o=0;o<Ke.length;o++){var i=Ke[o];var l=s[i];l&&(s[i]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e};var qe=De;var Ue={};var Me=b.MissingRef;Ue=compileAsync;
/**
 * Creates validating function for passed schema with asynchronous loading of missing schemas.
 * `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.
 * @this  Ajv
 * @param {Object}   schema schema object
 * @param {Boolean}  meta optional true to compile meta-schema; this parameter can be skipped
 * @param {Function} callback an optional node-style callback, it is called with 2 parameters: error (or null) and validating function.
 * @return {Promise} promise that resolves with a validating function.
 */function compileAsync(e,r,a){var t=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");if("function"==typeof r){a=r;r=void 0}var s=loadMetaSchemaOf(e).then((function(){var a=t._addSchema(e,void 0,r);return a.validate||_compileAsync(a)}));a&&s.then((function(e){a(null,e)}),a);return s;function loadMetaSchemaOf(e){var r=e.$schema;return r&&!t.getSchema(r)?compileAsync.call(t,{$ref:r},true):Promise.resolve()}function _compileAsync(e){try{return t._compile(e)}catch(e){if(e instanceof Me)return loadMissingSchema(e);throw e}function loadMissingSchema(a){var s=a.missingSchema;if(added(s))throw new Error("Schema "+s+" is loaded but "+a.missingRef+" cannot be resolved");var o=t._loadingSchemas[s];if(!o){o=t._loadingSchemas[s]=t._opts.loadSchema(s);o.then(removePromise,removePromise)}return o.then((function(e){if(!added(s))return loadMetaSchemaOf(e).then((function(){added(s)||t.addSchema(e,s,void 0,r)}))})).then((function(){return _compileAsync(e)}));function removePromise(){delete t._loadingSchemas[s]}function added(e){return t._refs[e]||t._schemas[e]}}}}var Te=Ue;var Ce={};Ce=function generate_custom(e,r,a){var t=" ";var s=e.level;var o=e.dataLevel;var i=e.schema[r];var l=e.schemaPath+e.util.getProperty(r);var n=e.errSchemaPath+"/"+r;var h=!e.opts.allErrors;var v;var c="data"+(o||"");var d="valid"+s;var m="errs__"+s;var u=e.opts.$data&&i&&i.$data,f;if(u){t+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ";f="schema"+s}else f=i;var p=this,y="definition"+s,g=p.definition,P="";var E,w,b,S,_;if(u&&g.$data){_="keywordValidate"+s;var R=g.validateSchema;t+=" var "+y+" = RULES.custom['"+r+"'].definition; var "+_+" = "+y+".validate;"}else{S=e.useCustomRule(p,i,e.schema,e);if(!S)return;f="validate.schema"+l;_=S.code;E=g.compile;w=g.inline;b=g.macro}var j=_+".errors",I="i"+s,k="ruleErr"+s,$=g.async;if($&&!e.async)throw new Error("async keyword in sync schema");w||b||(t+=j+" = null;");t+="var "+m+" = errors;var "+d+";";if(u&&g.$data){P+="}";t+=" if ("+f+" === undefined) { "+d+" = true; } else { ";if(R){P+="}";t+=" "+d+" = "+y+".validateSchema("+f+"); if ("+d+") { "}}if(w)g.statements?t+=" "+S.validate+" ":t+=" "+d+" = "+S.validate+"; ";else if(b){var O=e.util.copy(e);var P="";O.level++;var A="valid"+O.level;O.schema=S.validate;O.schemaPath="";var x=e.compositeRule;e.compositeRule=O.compositeRule=true;var L=e.validate(O).replace(/validate\.schema/g,_);e.compositeRule=O.compositeRule=x;t+=" "+L}else{var V=V||[];V.push(t);t="";t+="  "+_+".call( ";e.opts.passContext?t+="this":t+="self";E||false===g.schema?t+=" , "+c+" ":t+=" , "+f+" , "+c+" , validate.schema"+e.schemaPath+" ";t+=" , (dataPath || '')";'""'!=e.errorPath&&(t+=" + "+e.errorPath);var Q=o?"data"+(o-1||""):"parentData",D=o?e.dataPathArr[o]:"parentDataProperty";t+=" , "+Q+" , "+D+" , rootData )  ";var K=t;t=V.pop();if(false===g.errors){t+=" "+d+" = ";$&&(t+="await ");t+=K+"; "}else if($){j="customErrors"+s;t+=" var "+j+" = null; try { "+d+" = await "+K+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+j+" = e.errors; else throw e; } "}else t+=" "+j+" = null; "+d+" = "+K+"; "}g.modifying&&(t+=" if ("+Q+") "+c+" = "+Q+"["+D+"];");t+=""+P;if(g.valid)h&&(t+=" if (true) { ");else{t+=" if ( ";if(void 0===g.valid){t+=" !";t+=b?""+A:""+d}else t+=" "+!g.valid+" ";t+=") { ";v=p.keyword;var V=V||[];V.push(t);t="";var V=V||[];V.push(t);t="";if(false!==e.createErrors){t+=" { keyword: '"+(v||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { keyword: '"+p.keyword+"' } ";false!==e.opts.messages&&(t+=" , message: 'should pass \""+p.keyword+"\" keyword validation' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" ");t+=" } "}else t+=" {} ";var q=t;t=V.pop();!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+q+"]); ":t+=" validate.errors = ["+q+"]; return false; ":t+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var U=t;t=V.pop();if(w)if(g.errors){if("full"!=g.errors){t+="  for (var "+I+"="+m+"; "+I+"<errors; "+I+"++) { var "+k+" = vErrors["+I+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+n+'"; } ';e.opts.verbose&&(t+=" "+k+".schema = "+f+"; "+k+".data = "+c+"; ");t+=" } "}}else if(false===g.errors)t+=" "+U+" ";else{t+=" if ("+m+" == errors) { "+U+" } else {  for (var "+I+"="+m+"; "+I+"<errors; "+I+"++) { var "+k+" = vErrors["+I+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+n+'"; } ';e.opts.verbose&&(t+=" "+k+".schema = "+f+"; "+k+".data = "+c+"; ");t+=" } } "}else if(b){t+="   var err =   ";if(false!==e.createErrors){t+=" { keyword: '"+(v||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { keyword: '"+p.keyword+"' } ";false!==e.opts.messages&&(t+=" , message: 'should pass \""+p.keyword+"\" keyword validation' ");e.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" ");t+=" } "}else t+=" {} ";t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ")}else if(false===g.errors)t+=" "+U+" ";else{t+=" if (Array.isArray("+j+")) { if (vErrors === null) vErrors = "+j+"; else vErrors = vErrors.concat("+j+"); errors = vErrors.length;  for (var "+I+"="+m+"; "+I+"<errors; "+I+"++) { var "+k+" = vErrors["+I+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+";  "+k+'.schemaPath = "'+n+'";  ';e.opts.verbose&&(t+=" "+k+".schema = "+f+"; "+k+".data = "+c+"; ");t+=" } } else { "+U+" } "}t+=" } ";h&&(t+=" else { ")}return t};var Ne=Ce;var Fe={};var ze=i;Fe={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:ze.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:ze.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}};var He=Fe;var Je={};var Ge=/^[a-z_$][a-z0-9_$-]*$/i;var Be=Ne;var We=He;Je={add:addKeyword,get:getKeyword,remove:removeKeyword,validate:validateKeyword};
/**
 * Define custom keyword
 * @this  Ajv
 * @param {String} keyword custom keyword, should be unique (including different from all standard, custom and macro keywords).
 * @param {Object} definition keyword definition object with properties `type` (type(s) which the keyword applies to), `validate` or `compile`.
 * @return {Ajv} this for method chaining
 */function addKeyword(e,r){var a=this.RULES;if(a.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!Ge.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(r){this.validateKeyword(r,true);var t=r.type;if(Array.isArray(t))for(var s=0;s<t.length;s++)_addRule(e,t[s],r);else _addRule(e,t,r);var o=r.metaSchema;if(o){r.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]});r.validateSchema=this.compile(o,true)}}a.keywords[e]=a.all[e]=true;function _addRule(e,r,t){var s;for(var o=0;o<a.length;o++){var i=a[o];if(i.type==r){s=i;break}}if(!s){s={type:r,rules:[]};a.push(s)}var l={keyword:e,definition:t,custom:true,code:Be,implements:t.implements};s.rules.push(l);a.custom[e]=l}return this}
/**
 * Get keyword
 * @this  Ajv
 * @param {String} keyword pre-defined or custom keyword.
 * @return {Object|Boolean} custom keyword definition, `true` if it is a predefined keyword, `false` otherwise.
 */function getKeyword(e){var r=this.RULES.custom[e];return r?r.definition:this.RULES.keywords[e]||false}
/**
 * Remove keyword
 * @this  Ajv
 * @param {String} keyword pre-defined or custom keyword.
 * @return {Ajv} this for method chaining
 */function removeKeyword(e){var r=this.RULES;delete r.keywords[e];delete r.all[e];delete r.custom[e];for(var a=0;a<r.length;a++){var t=r[a].rules;for(var s=0;s<t.length;s++)if(t[s].keyword==e){t.splice(s,1);break}}return this}
/**
 * Validate keyword definition
 * @this  Ajv
 * @param {Object} definition keyword definition object.
 * @param {Boolean} throwError true to throw exception if definition is invalid
 * @return {boolean} validation result
 */function validateKeyword(e,r){validateKeyword.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(We,true);if(a(e))return true;validateKeyword.errors=a.errors;if(r)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return false}var Xe=Je;var Ye={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:false};var Ze={};var er=V,rr=P,ar=K,tr=h,sr=o,or=t,ir=Qe,lr=qe,nr=a;Ze=Ajv;Ajv.prototype.validate=validate;Ajv.prototype.compile=compile$1;Ajv.prototype.addSchema=addSchema;Ajv.prototype.addMetaSchema=addMetaSchema;Ajv.prototype.validateSchema=validateSchema;Ajv.prototype.getSchema=getSchema;Ajv.prototype.removeSchema=removeSchema;Ajv.prototype.addFormat=addFormat;Ajv.prototype.errorsText=errorsText;Ajv.prototype._addSchema=_addSchema;Ajv.prototype._compile=_compile;Ajv.prototype.compileAsync=Te;var hr=Xe;Ajv.prototype.addKeyword=hr.add;Ajv.prototype.getKeyword=hr.get;Ajv.prototype.removeKeyword=hr.remove;Ajv.prototype.validateKeyword=hr.validate;var vr=b;Ajv.ValidationError=vr.Validation;Ajv.MissingRefError=vr.MissingRef;Ajv.$dataMetaSchema=lr;var cr="http://json-schema.org/draft-07/schema";var dr=["removeAdditional","useDefaults","coerceTypes","strictDefaults"];var mr=["/properties"];
/**
 * Creates validator instance.
 * Usage: `Ajv(opts)`
 * @param {Object} opts optional options
 * @return {Object} ajv instance
 */function Ajv(e){if(!(this instanceof Ajv))return new Ajv(e);e=this._opts=nr.copy(e)||{};setLogger(this);this._schemas={};this._refs={};this._fragments={};this._formats=or(e.format);this._cache=e.cache||new ar;this._loadingSchemas={};this._compilations=[];this.RULES=ir();this._getId=chooseGetId(e);e.loopRequired=e.loopRequired||Infinity;"property"==e.errorDataPath&&(e._errorDataPathProperty=true);void 0===e.serialize&&(e.serialize=sr);this._metaOpts=getMetaSchemaOptions(this);e.formats&&addInitialFormats(this);e.keywords&&addInitialKeywords(this);addDefaultMetaSchema(this);"object"==typeof e.meta&&this.addMetaSchema(e.meta);e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}});addInitialSchemas(this)}
/**
 * Validate data using schema
 * Schema will be compiled and cached (using serialized JSON as key. [fast-json-stable-stringify](https://github.com/epoberezkin/fast-json-stable-stringify) is used to serialize.
 * @this   Ajv
 * @param  {String|Object} schemaKeyRef key, ref or schema object
 * @param  {Any} data to be validated
 * @return {Boolean} validation result. Errors from the last validation will be available in `ajv.errors` (and also in compiled schema: `schema.errors`).
 */function validate(e,r){var a;if("string"==typeof e){a=this.getSchema(e);if(!a)throw new Error('no schema with key or ref "'+e+'"')}else{var t=this._addSchema(e);a=t.validate||this._compile(t)}var s=a(r);true!==a.$async&&(this.errors=a.errors);return s}
/**
 * Create validating function for passed schema.
 * @this   Ajv
 * @param  {Object} schema schema object
 * @param  {Boolean} _meta true if schema is a meta-schema. Used internally to compile meta schemas of custom keywords.
 * @return {Function} validating function
 */function compile$1(e,r){var a=this._addSchema(e,void 0,r);return a.validate||this._compile(a)}
/**
 * Adds schema to the instance.
 * @this   Ajv
 * @param {Object|Array} schema schema or array of schemas. If array is passed, `key` and other parameters will be ignored.
 * @param {String} key Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.
 * @param {Boolean} _skipValidation true to skip schema validation. Used internally, option validateSchema should be used instead.
 * @param {Boolean} _meta true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.
 * @return {Ajv} this for method chaining
 */function addSchema(e,r,a,t){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,a,t);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");r=rr.normalizeId(r||o);checkUnique(this,r);this._schemas[r]=this._addSchema(e,a,t,true);return this}
/**
 * Add schema that will be used to validate other schemas
 * options in META_IGNORE_OPTIONS are alway set to false
 * @this   Ajv
 * @param {Object} schema schema object
 * @param {String} key optional schema key
 * @param {Boolean} skipValidation true to skip schema validation, can be used to override validateSchema option for meta-schema
 * @return {Ajv} this for method chaining
 */function addMetaSchema(e,r,a){this.addSchema(e,r,a,true);return this}
/**
 * Validate schema
 * @this   Ajv
 * @param {Object} schema schema to validate
 * @param {Boolean} throwOrLogError pass true to throw (or log) an error if invalid
 * @return {Boolean} true if schema is valid
 */function validateSchema(e,r){var a=e.$schema;if(void 0!==a&&"string"!=typeof a)throw new Error("$schema must be a string");a=a||this._opts.defaultMeta||defaultMeta(this);if(!a){this.logger.warn("meta-schema not available");this.errors=null;return true}var t=this.validate(a,e);if(!t&&r){var s="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(s);this.logger.error(s)}return t}function defaultMeta(e){var r=e._opts.meta;e._opts.defaultMeta="object"==typeof r?e._getId(r)||r:e.getSchema(cr)?cr:void 0;return e._opts.defaultMeta}
/**
 * Get compiled schema from the instance by `key` or `ref`.
 * @this   Ajv
 * @param  {String} keyRef `key` that was passed to `addSchema` or full schema reference (`schema.id` or resolved id).
 * @return {Function} schema validating function (with property `schema`).
 */function getSchema(e){var r=_getSchemaObj(this,e);switch(typeof r){case"object":return r.validate||this._compile(r);case"string":return this.getSchema(r);case"undefined":return _getSchemaFragment(this,e)}}function _getSchemaFragment(e,r){var a=rr.schema.call(e,{schema:{}},r);if(a){var t=a.schema,s=a.root,o=a.baseId;var i=er.call(e,t,s,void 0,o);e._fragments[r]=new tr({ref:r,fragment:true,schema:t,root:s,baseId:o,validate:i});return i}}function _getSchemaObj(e,r){r=rr.normalizeId(r);return e._schemas[r]||e._refs[r]||e._fragments[r]}
/**
 * Remove cached schema(s).
 * If no parameter is passed all schemas but meta-schemas are removed.
 * If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.
 * Even if schema is referenced by other schemas it still can be removed as other schemas have local references.
 * @this   Ajv
 * @param  {String|Object|RegExp} schemaKeyRef key, ref, pattern to match key/ref or schema object
 * @return {Ajv} this for method chaining
 */function removeSchema(e){if(e instanceof RegExp){_removeAllSchemas(this,this._schemas,e);_removeAllSchemas(this,this._refs,e);return this}switch(typeof e){case"undefined":_removeAllSchemas(this,this._schemas);_removeAllSchemas(this,this._refs);this._cache.clear();return this;case"string":var r=_getSchemaObj(this,e);r&&this._cache.del(r.cacheKey);delete this._schemas[e];delete this._refs[e];return this;case"object":var a=this._opts.serialize;var t=a?a(e):e;this._cache.del(t);var s=this._getId(e);if(s){s=rr.normalizeId(s);delete this._schemas[s];delete this._refs[s]}}return this}function _removeAllSchemas(e,r,a){for(var t in r){var s=r[t];if(!s.meta&&(!a||a.test(t))){e._cache.del(s.cacheKey);delete r[t]}}}function _addSchema(e,r,a,t){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var s=this._opts.serialize;var o=s?s(e):e;var i=this._cache.get(o);if(i)return i;t=t||false!==this._opts.addUsedSchema;var l=rr.normalizeId(this._getId(e));l&&t&&checkUnique(this,l);var n=false!==this._opts.validateSchema&&!r;var h;n&&!(h=l&&l==rr.normalizeId(e.$schema))&&this.validateSchema(e,true);var v=rr.ids.call(this,e);var c=new tr({id:l,schema:e,localRefs:v,cacheKey:o,meta:a});"#"!=l[0]&&t&&(this._refs[l]=c);this._cache.put(o,c);n&&h&&this.validateSchema(e,true);return c}function _compile(e,r){if(e.compiling){e.validate=callValidate;callValidate.schema=e.schema;callValidate.errors=null;callValidate.root=r||callValidate;true===e.schema.$async&&(callValidate.$async=true);return callValidate}e.compiling=true;var a;if(e.meta){a=this._opts;this._opts=this._metaOpts}var t;try{t=er.call(this,e.schema,r,e.localRefs)}catch(r){delete e.validate;throw r}finally{e.compiling=false;e.meta&&(this._opts=a)}e.validate=t;e.refs=t.refs;e.refVal=t.refVal;e.root=t.root;return t;function callValidate(){var r=e.validate;var a=r.apply(this,arguments);callValidate.errors=r.errors;return a}}function chooseGetId(e){switch(e.schemaId){case"auto":return _get$IdOrId;case"id":return _getId;default:return _get$Id}}function _getId(e){e.$id&&this.logger.warn("schema $id ignored",e.$id);return e.id}function _get$Id(e){e.id&&this.logger.warn("schema id ignored",e.id);return e.$id}function _get$IdOrId(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}
/**
 * Convert array of error message objects to string
 * @this   Ajv
 * @param  {Array<Object>} errors optional array of validation errors, if not passed errors from the instance are used.
 * @param  {Object} options optional options with properties `separator` and `dataVar`.
 * @return {String} human readable string with all errors descriptions
 */function errorsText(e,r){e=e||this.errors;if(!e)return"No errors";r=r||{};var a=void 0===r.separator?", ":r.separator;var t=void 0===r.dataVar?"data":r.dataVar;var s="";for(var o=0;o<e.length;o++){var i=e[o];i&&(s+=t+i.dataPath+" "+i.message+a)}return s.slice(0,-a.length)}
/**
 * Add custom format
 * @this   Ajv
 * @param {String} name format name
 * @param {String|RegExp|Function} format string is converted to RegExp; function should return boolean (true when valid)
 * @return {Ajv} this for method chaining
 */function addFormat(e,r){"string"==typeof r&&(r=new RegExp(r));this._formats[e]=r;return this}function addDefaultMetaSchema(e){var r;if(e._opts.$data){r=Ye;e.addMetaSchema(r,r.$id,true)}if(false!==e._opts.meta){var a=i;e._opts.$data&&(a=lr(a,mr));e.addMetaSchema(a,cr,true);e._refs["http://json-schema.org/schema"]=cr}}function addInitialSchemas(e){var r=e._opts.schemas;if(r)if(Array.isArray(r))e.addSchema(r);else for(var a in r)e.addSchema(r[a],a)}function addInitialFormats(e){for(var r in e._opts.formats){var a=e._opts.formats[r];e.addFormat(r,a)}}function addInitialKeywords(e){for(var r in e._opts.keywords){var a=e._opts.keywords[r];e.addKeyword(r,a)}}function checkUnique(e,r){if(e._schemas[r]||e._refs[r])throw new Error('schema with key or id "'+r+'" already exists')}function getMetaSchemaOptions(e){var r=nr.copy(e._opts);for(var a=0;a<dr.length;a++)delete r[dr[a]];return r}function setLogger(e){var r=e._opts.logger;if(false===r)e.logger={log:noop,warn:noop,error:noop};else{void 0===r&&(r=console);if(!("object"==typeof r&&r.log&&r.warn&&r.error))throw new Error("logger must implement log, warn and error methods");e.logger=r}}function noop(){}var ur=Ze;export default ur;

