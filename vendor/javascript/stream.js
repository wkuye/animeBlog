import{d as e}from"../../_/C7GZrc4O.js";import t from"./events.js";import{p as r}from"../../_/K0DDDZy7.js";import{e as n}from"../../_/8HqGYODu.js";import{promisify as o}from"./util.js";import"../../_/B4cTAYwc.js";import"../../_/BbZxKIaC.js";var i={},a=false;function dew$o(){if(a)return i;a=true;i={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error:Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise:Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String:String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean:Boolean,Uint8Array:Uint8Array};return i}var s={},l=false;function dew$n(){if(l)return s;l=true;const{AbortController:e,AbortSignal:t}=typeof self!=="undefined"?self:typeof window!=="undefined"?window:void 0;s=e;s.AbortSignal=t;s.default=e;return s}var d={},u=false;function dew$m(){if(u)return d;u=true;const r=e();const{kResistStopPropagation:n,SymbolDispose:o}=dew$o();const i=globalThis.AbortSignal||dew$n().AbortSignal;const a=globalThis.AbortController||dew$n().AbortController;const s=Object.getPrototypeOf((async function(){})).constructor;const l=globalThis.Blob||r.Blob;const f=typeof l!=="undefined"?function isBlob(e){return e instanceof l}:function isBlob(e){return false};const validateAbortSignal=(e,t)=>{if(e!==void 0&&(e===null||typeof e!=="object"||!("aborted"in e)))throw new ERR_INVALID_ARG_TYPE(t,"AbortSignal",e)};const validateFunction=(e,t)=>{if(typeof e!=="function")throw new ERR_INVALID_ARG_TYPE(t,"Function",e)};class AggregateError extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t);this.name="AggregateError";this.errors=e}}d={AggregateError:AggregateError,kEmptyObject:Object.freeze({}),once(e){let t=false;return function(...r){if(!t){t=true;e.apply(this,r)}}},createDeferredPromise:function(){let e;let t;const r=new Promise(((r,n)=>{e=r;t=n}));return{promise:r,resolve:e,reject:t}},promisify(e){return new Promise(((t,r)=>{e(((e,...n)=>e?r(e):t(...n)))}))},debuglog(){return function(){}},format(e,...t){return e.replace(/%([sdifj])/g,(function(...[e,r]){const n=t.shift();if(r==="f")return n.toFixed(6);if(r==="j")return JSON.stringify(n);if(r==="s"&&typeof n==="object"){const e=n.constructor!==Object?n.constructor.name:"";return`${e} {}`.trim()}return n.toString()}))},inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction(e){return e instanceof s},isArrayBufferView(e){return ArrayBuffer.isView(e)}},isBlob:f,deprecate(e,t){return e},addAbortListener:t.addAbortListener||function addAbortListener(e,t){if(e===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);validateAbortSignal(e,"signal");validateFunction(t,"listener");let r;if(e.aborted)queueMicrotask((()=>t()));else{e.addEventListener("abort",t,{__proto__:null,once:true,[n]:true});r=()=>{e.removeEventListener("abort",t)}}return{__proto__:null,[o](){var e;(e=r)===null||e===void 0?void 0:e()}}},AbortSignalAny:i.any||function AbortSignalAny(e){if(e.length===1)return e[0];const t=new a;const abort=()=>t.abort();e.forEach((e=>{validateAbortSignal(e,"signals");e.addEventListener("abort",abort,{once:true})}));t.signal.addEventListener("abort",(()=>{e.forEach((e=>e.removeEventListener("abort",abort)))}),{once:true});return t.signal}};d.promisify.custom=Symbol.for("nodejs.util.promisify.custom");return d}var f={},c=false;function dew$l(){if(c)return f;c=true;const{format:e,inspect:t,AggregateError:r}=dew$m();const n=globalThis.AggregateError||r;const o=Symbol("kIsNodeError");const i=["string","function","number","object","Function","Object","boolean","bigint","symbol"];const a=/^([A-Z][a-z0-9]*)+$/;const s="__node_internal_";const l={};function assert(e,t){if(!e)throw new l.ERR_INTERNAL_ASSERTION(t)}function addNumericalSeparator(e){let t="";let r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function getMessage(t,r,n){if(typeof r==="function"){assert(r.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r.length}).`);return r(...n)}const o=(r.match(/%[dfijoOs]/g)||[]).length;assert(o===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${o}).`);return n.length===0?r:e(r,...n)}function E(e,t,r){r||(r=Error);class NodeError extends r{constructor(...r){super(getMessage(e,t,r))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(NodeError.prototype,{name:{value:r.name,writable:true,enumerable:false,configurable:true},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:true,enumerable:false,configurable:true}});NodeError.prototype.code=e;NodeError.prototype[o]=true;l[e]=NodeError}function hideStackFrames(e){const t=s+e.name;Object.defineProperty(e,"name",{value:t});return e}function aggregateTwoErrors(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors)){t.errors.push(e);return t}const r=new n([t,e],t.message);r.code=t.code;return r}return e||t}class AbortError extends Error{constructor(e="The operation was aborted",t=void 0){if(t!==void 0&&typeof t!=="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t);this.code="ABORT_ERR";this.name="AbortError"}}E("ERR_ASSERTION","%s",Error);E("ERR_INVALID_ARG_TYPE",((e,r,n)=>{assert(typeof e==="string","'name' must be a string");Array.isArray(r)||(r=[r]);let o="The ";e.endsWith(" argument")?o+=`${e} `:o+=`"${e}" ${e.includes(".")?"property":"argument"} `;o+="must be ";const s=[];const l=[];const d=[];for(const e of r){assert(typeof e==="string","All expected entries have to be of type string");if(i.includes(e))s.push(e.toLowerCase());else if(a.test(e))l.push(e);else{assert(e!=="object",'The value "object" should be written as "Object"');d.push(e)}}if(l.length>0){const e=s.indexOf("object");if(e!==-1){s.splice(s,e,1);l.push("Object")}}if(s.length>0){switch(s.length){case 1:o+=`of type ${s[0]}`;break;case 2:o+=`one of type ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();o+=`one of type ${s.join(", ")}, or ${e}`}}(l.length>0||d.length>0)&&(o+=" or ")}if(l.length>0){switch(l.length){case 1:o+=`an instance of ${l[0]}`;break;case 2:o+=`an instance of ${l[0]} or ${l[1]}`;break;default:{const e=l.pop();o+=`an instance of ${l.join(", ")}, or ${e}`}}d.length>0&&(o+=" or ")}switch(d.length){case 0:break;case 1:d[0].toLowerCase()!==d[0]&&(o+="an ");o+=`${d[0]}`;break;case 2:o+=`one of ${d[0]} or ${d[1]}`;break;default:{const e=d.pop();o+=`one of ${d.join(", ")}, or ${e}`}}if(n==null)o+=`. Received ${n}`;else if(typeof n==="function"&&n.name)o+=`. Received function ${n.name}`;else if(typeof n==="object"){var u;if((u=n.constructor)!==null&&u!==void 0&&u.name)o+=`. Received an instance of ${n.constructor.name}`;else{const e=t(n,{depth:-1});o+=`. Received ${e}`}}else{let e=t(n,{colors:false});e.length>25&&(e=`${e.slice(0,25)}...`);o+=`. Received type ${typeof n} (${e})`}return o}),TypeError);E("ERR_INVALID_ARG_VALUE",((e,r,n="is invalid")=>{let o=t(r);o.length>128&&(o=o.slice(0,128)+"...");const i=e.includes(".")?"property":"argument";return`The ${i} '${e}' ${n}. Received ${o}`}),TypeError);E("ERR_INVALID_RETURN_VALUE",((e,t,r)=>{var n;const o=r!==null&&r!==void 0&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:"type "+typeof r;return`Expected ${e} to be returned from the "${t}" function but got ${o}.`}),TypeError);E("ERR_MISSING_ARGS",((...e)=>{assert(e.length>0,"At least one arg needs to be specified");let t;const r=e.length;e=(Array.isArray(e)?e:[e]).map((e=>`"${e}"`)).join(" or ");switch(r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}break}return`${t} must be specified`}),TypeError);E("ERR_OUT_OF_RANGE",((e,r,n)=>{assert(r,'Missing "range" argument');let o;if(Number.isInteger(n)&&Math.abs(n)>2**32)o=addNumericalSeparator(String(n));else if(typeof n==="bigint"){o=String(n);(n>2n**32n||n<-(2n**32n))&&(o=addNumericalSeparator(o));o+="n"}else o=t(n);return`The value of "${e}" is out of range. It must be ${r}. Received ${o}`}),RangeError);E("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);E("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);E("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);E("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);E("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);E("ERR_STREAM_WRITE_AFTER_END","write after end",Error);E("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);f={AbortError:AbortError,aggregateTwoErrors:hideStackFrames(aggregateTwoErrors),hideStackFrames:hideStackFrames,codes:l};return f}var b={},h=false;function dew$k(){if(h)return b;h=true;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:r,ArrayPrototypeMap:n,NumberIsInteger:o,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:s,NumberParseInt:l,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:u,String:f,StringPrototypeToUpperCase:c,StringPrototypeTrim:p}=dew$o();const{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:g,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:S}}=dew$l();const{normalizeEncoding:v}=dew$m();const{isAsyncFunction:R,isArrayBufferView:A}=dew$m().types;const T={};
/**
   * @param {*} value
   * @returns {boolean}
   */function isInt32(e){return e===(e|0)}
/**
   * @param {*} value
   * @returns {boolean}
   */function isUint32(e){return e===e>>>0}const k=/^[0-7]+$/;const $="must be a 32-bit unsigned integer or an octal string";
/**
   * Parse and validate values that will be converted into mode_t (the S_*
   * constants). Only valid numbers and octal strings are allowed. They could be
   * converted to 32-bit unsigned integers or non-negative signed integers in the
   * C++ land, but any value higher than 0o777 will result in platform-specific
   * behaviors.
   * @param {*} value Values to be validated
   * @param {string} name Name of the argument
   * @param {number} [def] If specified, will be returned for invalid values
   * @returns {number}
   */function parseFileMode(e,t,r){typeof e==="undefined"&&(e=r);if(typeof e==="string"){if(u(k,e)===null)throw new g(t,e,$);e=l(e,8)}M(e,t);return e}
/**
   * @callback validateInteger
   * @param {*} value
   * @param {string} name
   * @param {number} [min]
   * @param {number} [max]
   * @returns {asserts value is number}
   */
/** @type {validateInteger} */const D=w(((e,t,r=s,n=a)=>{if(typeof e!=="number")throw new m(t,"number",e);if(!o(e))throw new _(t,"an integer",e);if(e<r||e>n)throw new _(t,`>= ${r} && <= ${n}`,e)}));
/**
   * @callback validateInt32
   * @param {*} value
   * @param {string} name
   * @param {number} [min]
   * @param {number} [max]
   * @returns {asserts value is number}
   */
/** @type {validateInt32} */const N=w(((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!=="number")throw new m(t,"number",e);if(!o(e))throw new _(t,"an integer",e);if(e<r||e>n)throw new _(t,`>= ${r} && <= ${n}`,e)}));
/**
   * @callback validateUint32
   * @param {*} value
   * @param {string} name
   * @param {number|boolean} [positive=false]
   * @returns {asserts value is number}
   */
/** @type {validateUint32} */const M=w(((e,t,r=false)=>{if(typeof e!=="number")throw new m(t,"number",e);if(!o(e))throw new _(t,"an integer",e);const n=r?1:0;const i=4294967295;if(e<n||e>i)throw new _(t,`>= ${n} && <= ${i}`,e)}));
/**
   * @callback validateString
   * @param {*} value
   * @param {string} name
   * @returns {asserts value is string}
   */
/** @type {validateString} */function validateString(e,t){if(typeof e!=="string")throw new m(t,"string",e)}
/**
   * @callback validateNumber
   * @param {*} value
   * @param {string} name
   * @param {number} [min]
   * @param {number} [max]
   * @returns {asserts value is number}
   */
/** @type {validateNumber} */function validateNumber(e,t,r=void 0,n){if(typeof e!=="number")throw new m(t,"number",e);if(r!=null&&e<r||n!=null&&e>n||(r!=null||n!=null)&&i(e))throw new _(t,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,e)}
/**
   * @callback validateOneOf
   * @template T
   * @param {T} value
   * @param {string} name
   * @param {T[]} oneOf
   */
/** @type {validateOneOf} */const W=w(((e,o,i)=>{if(!t(i,e)){const t=r(n(i,(e=>typeof e==="string"?`'${e}'`:f(e))),", ");const a="must be one of: "+t;throw new g(o,e,a)}}));
/**
   * @callback validateBoolean
   * @param {*} value
   * @param {string} name
   * @returns {asserts value is boolean}
   */
/** @type {validateBoolean} */function validateBoolean(e,t){if(typeof e!=="boolean")throw new m(t,"boolean",e)}
/**
   * @param {any} options
   * @param {string} key
   * @param {boolean} defaultValue
   * @returns {boolean}
   */function getOwnPropertyValueOrDefault(e,t,r){return e!=null&&d(e,t)?e[t]:r}
/**
   * @callback validateObject
   * @param {*} value
   * @param {string} name
   * @param {{
   *   allowArray?: boolean,
   *   allowFunction?: boolean,
   *   nullable?: boolean
   * }} [options]
   */
/** @type {validateObject} */const I=w(((t,r,n=null)=>{const o=getOwnPropertyValueOrDefault(n,"allowArray",false);const i=getOwnPropertyValueOrDefault(n,"allowFunction",false);const a=getOwnPropertyValueOrDefault(n,"nullable",false);if(!a&&t===null||!o&&e(t)||typeof t!=="object"&&(!i||typeof t!=="function"))throw new m(r,"Object",t)}));
/**
   * @callback validateDictionary - We are using the Web IDL Standard definition
   *                                of "dictionary" here, which means any value
   *                                whose Type is either Undefined, Null, or
   *                                Object (which includes functions).
   * @param {*} value
   * @param {string} name
   * @see https://webidl.spec.whatwg.org/#es-dictionary
   * @see https://tc39.es/ecma262/#table-typeof-operator-results
   */
/** @type {validateDictionary} */const P=w(((e,t)=>{if(e!=null&&typeof e!=="object"&&typeof e!=="function")throw new m(t,"a dictionary",e)}));
/**
   * @callback validateArray
   * @param {*} value
   * @param {string} name
   * @param {number} [minLength]
   * @returns {asserts value is any[]}
   */
/** @type {validateArray} */const O=w(((t,r,n=0)=>{if(!e(t))throw new m(r,"Array",t);if(t.length<n){const e=`must be longer than ${n}`;throw new g(r,t,e)}}));
/**
   * @callback validateStringArray
   * @param {*} value
   * @param {string} name
   * @returns {asserts value is string[]}
   */
/** @type {validateStringArray} */function validateStringArray(e,t){O(e,t);for(let r=0;r<e.length;r++)validateString(e[r],`${t}[${r}]`)}
/**
   * @callback validateBooleanArray
   * @param {*} value
   * @param {string} name
   * @returns {asserts value is boolean[]}
   */
/** @type {validateBooleanArray} */function validateBooleanArray(e,t){O(e,t);for(let r=0;r<e.length;r++)validateBoolean(e[r],`${t}[${r}]`)}
/**
   * @callback validateAbortSignalArray
   * @param {*} value
   * @param {string} name
   * @returns {asserts value is AbortSignal[]}
   */
/** @type {validateAbortSignalArray} */function validateAbortSignalArray(e,t){O(e,t);for(let r=0;r<e.length;r++){const n=e[r];const o=`${t}[${r}]`;if(n==null)throw new m(o,"AbortSignal",n);j(n,o)}}
/**
   * @param {*} signal
   * @param {string} [name='signal']
   * @returns {asserts signal is keyof signals}
   */function validateSignalName(e,t="signal"){validateString(e,t);if(T[e]===void 0){if(T[c(e)]!==void 0)throw new S(e+" (signals must use all capital letters)");throw new S(e)}}
/**
   * @callback validateBuffer
   * @param {*} buffer
   * @param {string} [name='buffer']
   * @returns {asserts buffer is ArrayBufferView}
   */
/** @type {validateBuffer} */const L=w(((e,t="buffer")=>{if(!A(e))throw new m(t,["Buffer","TypedArray","DataView"],e)}));
/**
   * @param {string} data
   * @param {string} encoding
   */function validateEncoding(e,t){const r=v(t);const n=e.length;if(r==="hex"&&n%2!==0)throw new g("encoding",t,`is invalid for data of length ${n}`)}
/**
   * Check that the port number is not NaN when coerced to a number,
   * is an integer and that it falls within the legal range of port numbers.
   * @param {*} port
   * @param {string} [name='Port']
   * @param {boolean} [allowZero=true]
   * @returns {number}
   */function validatePort(e,t="Port",r=true){if(typeof e!=="number"&&typeof e!=="string"||typeof e==="string"&&p(e).length===0||+e!==+e>>>0||e>65535||e===0&&!r)throw new y(t,e,r);return e|0}
/**
   * @callback validateAbortSignal
   * @param {*} signal
   * @param {string} name
   */
/** @type {validateAbortSignal} */const j=w(((e,t)=>{if(e!==void 0&&(e===null||typeof e!=="object"||!("aborted"in e)))throw new m(t,"AbortSignal",e)}));
/**
   * @callback validateFunction
   * @param {*} value
   * @param {string} name
   * @returns {asserts value is Function}
   */
/** @type {validateFunction} */const x=w(((e,t)=>{if(typeof e!=="function")throw new m(t,"Function",e)}));
/**
   * @callback validatePlainFunction
   * @param {*} value
   * @param {string} name
   * @returns {asserts value is Function}
   */
/** @type {validatePlainFunction} */const C=w(((e,t)=>{if(typeof e!=="function"||R(e))throw new m(t,"Function",e)}));
/**
   * @callback validateUndefined
   * @param {*} value
   * @param {string} name
   * @returns {asserts value is undefined}
   */
/** @type {validateUndefined} */const F=w(((e,t)=>{if(e!==void 0)throw new m(t,"undefined",e)}));
/**
   * @template T
   * @param {T} value
   * @param {string} name
   * @param {T[]} union
   */function validateUnion(e,n,o){if(!t(o,e))throw new m(n,`('${r(o,"|")}')`,e)}const B=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;
/**
   * @param {any} value
   * @param {string} name
   */function validateLinkHeaderFormat(e,t){if(typeof e==="undefined"||!u(B,e))throw new g(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}
/**
   * @param {any} hints
   * @return {string}
   */function validateLinkHeaderValue(t){if(typeof t==="string"){validateLinkHeaderFormat(t,"hints");return t}if(e(t)){const e=t.length;let r="";if(e===0)return r;for(let n=0;n<e;n++){const o=t[n];validateLinkHeaderFormat(o,"hints");r+=o;n!==e-1&&(r+=", ")}return r}throw new g("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}b={isInt32:isInt32,isUint32:isUint32,parseFileMode:parseFileMode,validateArray:O,validateStringArray:validateStringArray,validateBooleanArray:validateBooleanArray,validateAbortSignalArray:validateAbortSignalArray,validateBoolean:validateBoolean,validateBuffer:L,validateDictionary:P,validateEncoding:validateEncoding,validateFunction:x,validateInt32:N,validateInteger:D,validateNumber:validateNumber,validateObject:I,validateOneOf:W,validatePlainFunction:C,validatePort:validatePort,validateSignalName:validateSignalName,validateString:validateString,validateUint32:M,validateUndefined:F,validateUnion:validateUnion,validateAbortSignal:j,validateLinkHeaderValue:validateLinkHeaderValue};return b}var p={},w=false;function dew$j(){if(w)return p;w=true;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:r}=dew$o();const n=r("nodejs.stream.destroyed");const o=r("nodejs.stream.errored");const i=r("nodejs.stream.readable");const a=r("nodejs.stream.writable");const s=r("nodejs.stream.disturbed");const l=r("nodejs.webstream.isClosedPromise");const d=r("nodejs.webstream.controllerErrorFunction");function isReadableNodeStream(e,t=false){var r;return!!(e&&typeof e.pipe==="function"&&typeof e.on==="function"&&(!t||typeof e.pause==="function"&&typeof e.resume==="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==false)&&(!e._writableState||e._readableState))}function isWritableNodeStream(e){var t;return!!(e&&typeof e.write==="function"&&typeof e.on==="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==false))}function isDuplexNodeStream(e){return!!(e&&typeof e.pipe==="function"&&e._readableState&&typeof e.on==="function"&&typeof e.write==="function")}function isNodeStream(e){return e&&(e._readableState||e._writableState||typeof e.write==="function"&&typeof e.on==="function"||typeof e.pipe==="function"&&typeof e.on==="function")}function isReadableStream(e){return!!(e&&!isNodeStream(e)&&typeof e.pipeThrough==="function"&&typeof e.getReader==="function"&&typeof e.cancel==="function")}function isWritableStream(e){return!!(e&&!isNodeStream(e)&&typeof e.getWriter==="function"&&typeof e.abort==="function")}function isTransformStream(e){return!!(e&&!isNodeStream(e)&&typeof e.readable==="object"&&typeof e.writable==="object")}function isWebStream(e){return isReadableStream(e)||isWritableStream(e)||isTransformStream(e)}function isIterable(r,n){return r!=null&&(n===true?typeof r[e]==="function":n===false?typeof r[t]==="function":typeof r[e]==="function"||typeof r[t]==="function")}function isDestroyed(e){if(!isNodeStream(e))return null;const t=e._writableState;const r=e._readableState;const o=t||r;return!!(e.destroyed||e[n]||o!==null&&o!==void 0&&o.destroyed)}function isWritableEnded(e){if(!isWritableNodeStream(e))return null;if(e.writableEnded===true)return true;const t=e._writableState;return(t===null||t===void 0||!t.errored)&&(typeof(t===null||t===void 0?void 0:t.ended)!=="boolean"?null:t.ended)}function isWritableFinished(e,t){if(!isWritableNodeStream(e))return null;if(e.writableFinished===true)return true;const r=e._writableState;return(r===null||r===void 0||!r.errored)&&(typeof(r===null||r===void 0?void 0:r.finished)!=="boolean"?null:!!(r.finished||t===false&&r.ended===true&&r.length===0))}function isReadableEnded(e){if(!isReadableNodeStream(e))return null;if(e.readableEnded===true)return true;const t=e._readableState;return!(!t||t.errored)&&(typeof(t===null||t===void 0?void 0:t.ended)!=="boolean"?null:t.ended)}function isReadableFinished(e,t){if(!isReadableNodeStream(e))return null;const r=e._readableState;return(r===null||r===void 0||!r.errored)&&(typeof(r===null||r===void 0?void 0:r.endEmitted)!=="boolean"?null:!!(r.endEmitted||t===false&&r.ended===true&&r.length===0))}function isReadable(e){return e&&e[i]!=null?e[i]:typeof(e===null||e===void 0?void 0:e.readable)!=="boolean"?null:!isDestroyed(e)&&(isReadableNodeStream(e)&&e.readable&&!isReadableFinished(e))}function isWritable(e){return e&&e[a]!=null?e[a]:typeof(e===null||e===void 0?void 0:e.writable)!=="boolean"?null:!isDestroyed(e)&&(isWritableNodeStream(e)&&e.writable&&!isWritableEnded(e))}function isFinished(e,t){return isNodeStream(e)?!!isDestroyed(e)||((t===null||t===void 0?void 0:t.readable)===false||!isReadable(e))&&((t===null||t===void 0?void 0:t.writable)===false||!isWritable(e)):null}function isWritableErrored(e){var t,r;return isNodeStream(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function isReadableErrored(e){var t,r;return isNodeStream(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function isClosed(e){if(!isNodeStream(e))return null;if(typeof e.closed==="boolean")return e.closed;const t=e._writableState;const r=e._readableState;return typeof(t===null||t===void 0?void 0:t.closed)==="boolean"||typeof(r===null||r===void 0?void 0:r.closed)==="boolean"?(t===null||t===void 0?void 0:t.closed)||(r===null||r===void 0?void 0:r.closed):typeof e._closed==="boolean"&&isOutgoingMessage(e)?e._closed:null}function isOutgoingMessage(e){return typeof e._closed==="boolean"&&typeof e._defaultKeepAlive==="boolean"&&typeof e._removedConnection==="boolean"&&typeof e._removedContLen==="boolean"}function isServerResponse(e){return typeof e._sent100==="boolean"&&isOutgoingMessage(e)}function isServerRequest(e){var t;return typeof e._consuming==="boolean"&&typeof e._dumped==="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function willEmitClose(e){if(!isNodeStream(e))return null;const t=e._writableState;const r=e._readableState;const n=t||r;return!n&&isServerResponse(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===false)}function isDisturbed(e){var t;return!!(e&&((t=e[s])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function isErrored(e){var t,r,n,i,a,s,l,d,u,f;return!!(e&&((t=(r=(n=(i=(a=(s=e[o])!==null&&s!==void 0?s:e.readableErrored)!==null&&a!==void 0?a:e.writableErrored)!==null&&i!==void 0?i:(l=e._readableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(d=e._writableState)===null||d===void 0?void 0:d.errorEmitted)!==null&&r!==void 0?r:(u=e._readableState)===null||u===void 0?void 0:u.errored)!==null&&t!==void 0?t:(f=e._writableState)===null||f===void 0?void 0:f.errored))}p={isDestroyed:isDestroyed,kIsDestroyed:n,isDisturbed:isDisturbed,kIsDisturbed:s,isErrored:isErrored,kIsErrored:o,isReadable:isReadable,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:d,kIsWritable:a,isClosed:isClosed,isDuplexNodeStream:isDuplexNodeStream,isFinished:isFinished,isIterable:isIterable,isReadableNodeStream:isReadableNodeStream,isReadableStream:isReadableStream,isReadableEnded:isReadableEnded,isReadableFinished:isReadableFinished,isReadableErrored:isReadableErrored,isNodeStream:isNodeStream,isWebStream:isWebStream,isWritable:isWritable,isWritableNodeStream:isWritableNodeStream,isWritableStream:isWritableStream,isWritableEnded:isWritableEnded,isWritableFinished:isWritableFinished,isWritableErrored:isWritableErrored,isServerRequest:isServerRequest,isServerResponse:isServerResponse,willEmitClose:willEmitClose,isTransformStream:isTransformStream};return p}var y={},m=false;function dew$i(){if(m)return y;m=true;const e=r;const{AbortError:t,codes:n}=dew$l();const{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_PREMATURE_CLOSE:i}=n;const{kEmptyObject:a,once:s}=dew$m();const{validateAbortSignal:l,validateFunction:d,validateObject:u,validateBoolean:f}=dew$k();const{Promise:c,PromisePrototypeThen:b,SymbolDispose:h}=dew$o();const{isClosed:p,isReadable:w,isReadableNodeStream:g,isReadableStream:_,isReadableFinished:S,isReadableErrored:v,isWritable:R,isWritableNodeStream:A,isWritableStream:T,isWritableFinished:k,isWritableErrored:$,isNodeStream:D,willEmitClose:N,kIsClosedPromise:M}=dew$j();let W;function isRequest(e){return e.setHeader&&typeof e.abort==="function"}const nop=()=>{};function eos(r,n,f){var c,b;if(arguments.length===2){f=n;n=a}else n==null?n=a:u(n,"options");d(f,"callback");l(n.signal,"options.signal");f=s(f);if(_(r)||T(r))return eosWeb(r,n,f);if(!D(r))throw new o("stream",["ReadableStream","WritableStream","Stream"],r);const y=(c=n.readable)!==null&&c!==void 0?c:g(r);const m=(b=n.writable)!==null&&b!==void 0?b:A(r);const M=r._writableState;const I=r._readableState;const onlegacyfinish=()=>{r.writable||onfinish()};let P=N(r)&&g(r)===y&&A(r)===m;let O=k(r,false);const onfinish=()=>{O=true;r.destroyed&&(P=false);(!P||r.readable&&!y)&&(y&&!L||f.call(r))};let L=S(r,false);const onend=()=>{L=true;r.destroyed&&(P=false);(!P||r.writable&&!m)&&(m&&!O||f.call(r))};const onerror=e=>{f.call(r,e)};let j=p(r);const onclose=()=>{j=true;const e=$(r)||v(r);if(e&&typeof e!=="boolean")return f.call(r,e);if(y&&!L&&g(r,true)&&!S(r,false))return f.call(r,new i);if(m&&!O&&!k(r,false))return f.call(r,new i);f.call(r)};const onclosed=()=>{j=true;const e=$(r)||v(r);if(e&&typeof e!=="boolean")return f.call(r,e);f.call(r)};const onrequest=()=>{r.req.on("finish",onfinish)};if(isRequest(r)){r.on("complete",onfinish);P||r.on("abort",onclose);r.req?onrequest():r.on("request",onrequest)}else if(m&&!M){r.on("end",onlegacyfinish);r.on("close",onlegacyfinish)}P||typeof r.aborted!=="boolean"||r.on("aborted",onclose);r.on("end",onend);r.on("finish",onfinish);n.error!==false&&r.on("error",onerror);r.on("close",onclose);j?e.nextTick(onclose):M!==null&&M!==void 0&&M.errorEmitted||I!==null&&I!==void 0&&I.errorEmitted?P||e.nextTick(onclosed):(y||P&&!w(r)||!O&&R(r)!==false)&&(m||P&&!R(r)||!L&&w(r)!==false)?I&&r.req&&r.aborted&&e.nextTick(onclosed):e.nextTick(onclosed);const cleanup=()=>{f=nop;r.removeListener("aborted",onclose);r.removeListener("complete",onfinish);r.removeListener("abort",onclose);r.removeListener("request",onrequest);r.req&&r.req.removeListener("finish",onfinish);r.removeListener("end",onlegacyfinish);r.removeListener("close",onlegacyfinish);r.removeListener("finish",onfinish);r.removeListener("end",onend);r.removeListener("error",onerror);r.removeListener("close",onclose)};if(n.signal&&!j){const abort=()=>{const e=f;cleanup();e.call(r,new t(void 0,{cause:n.signal.reason}))};if(n.signal.aborted)e.nextTick(abort);else{W=W||dew$m().addAbortListener;const e=W(n.signal,abort);const t=f;f=s(((...n)=>{e[h]();t.apply(r,n)}))}}return cleanup}function eosWeb(r,n,o){let i=false;let a=nop;if(n.signal){a=()=>{i=true;o.call(r,new t(void 0,{cause:n.signal.reason}))};if(n.signal.aborted)e.nextTick(a);else{W=W||dew$m().addAbortListener;const e=W(n.signal,a);const t=o;o=s(((...n)=>{e[h]();t.apply(r,n)}))}}const resolverFn=(...t)=>{i||e.nextTick((()=>o.apply(r,t)))};b(r[M].promise,resolverFn,resolverFn);return nop}function finished(e,t){var r;let n=false;t===null&&(t=a);if((r=t)!==null&&r!==void 0&&r.cleanup){f(t.cleanup,"cleanup");n=t.cleanup}return new c(((r,o)=>{const i=eos(e,t,(e=>{n&&i();e?o(e):r()}))}))}y=eos;y.finished=finished;return y}var g={},_=false;function dew$h(){if(_)return g;_=true;const e=r;const{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:o}=dew$l();const{Symbol:i}=dew$o();const{kIsDestroyed:a,isDestroyed:s,isFinished:l,isServerRequest:d}=dew$j();const u=i("kDestroy");const f=i("kConstruct");function checkError(e,t,r){if(e){e.stack;t&&!t.errored&&(t.errored=e);r&&!r.errored&&(r.errored=e)}}function destroy(e,r){const n=this._readableState;const o=this._writableState;const i=o||n;if(o!==null&&o!==void 0&&o.destroyed||n!==null&&n!==void 0&&n.destroyed){typeof r==="function"&&r();return this}checkError(e,o,n);o&&(o.destroyed=true);n&&(n.destroyed=true);i.constructed?_destroy(this,e,r):this.once(u,(function(n){_destroy(this,t(n,e),r)}));return this}function _destroy(t,r,n){let o=false;function onDestroy(r){if(o)return;o=true;const i=t._readableState;const a=t._writableState;checkError(r,a,i);a&&(a.closed=true);i&&(i.closed=true);typeof n==="function"&&n(r);r?e.nextTick(emitErrorCloseNT,t,r):e.nextTick(emitCloseNT,t)}try{t._destroy(r||null,onDestroy)}catch(r){onDestroy(r)}}function emitErrorCloseNT(e,t){emitErrorNT(e,t);emitCloseNT(e)}function emitCloseNT(e){const t=e._readableState;const r=e._writableState;r&&(r.closeEmitted=true);t&&(t.closeEmitted=true);(r!==null&&r!==void 0&&r.emitClose||t!==null&&t!==void 0&&t.emitClose)&&e.emit("close")}function emitErrorNT(e,t){const r=e._readableState;const n=e._writableState;if(!(n!==null&&n!==void 0&&n.errorEmitted||r!==null&&r!==void 0&&r.errorEmitted)){n&&(n.errorEmitted=true);r&&(r.errorEmitted=true);e.emit("error",t)}}function undestroy(){const e=this._readableState;const t=this._writableState;if(e){e.constructed=true;e.closed=false;e.closeEmitted=false;e.destroyed=false;e.errored=null;e.errorEmitted=false;e.reading=false;e.ended=e.readable===false;e.endEmitted=e.readable===false}if(t){t.constructed=true;t.destroyed=false;t.closed=false;t.closeEmitted=false;t.errored=null;t.errorEmitted=false;t.finalCalled=false;t.prefinished=false;t.ended=t.writable===false;t.ending=t.writable===false;t.finished=t.writable===false}}function errorOrDestroy(t,r,n){const o=t._readableState;const i=t._writableState;if(i!==null&&i!==void 0&&i.destroyed||o!==null&&o!==void 0&&o.destroyed)return this;if(o!==null&&o!==void 0&&o.autoDestroy||i!==null&&i!==void 0&&i.autoDestroy)t.destroy(r);else if(r){r.stack;i&&!i.errored&&(i.errored=r);o&&!o.errored&&(o.errored=r);n?e.nextTick(emitErrorNT,t,r):emitErrorNT(t,r)}}function construct(t,r){if(typeof t._construct!=="function")return;const n=t._readableState;const o=t._writableState;n&&(n.constructed=false);o&&(o.constructed=false);t.once(f,r);t.listenerCount(f)>1||e.nextTick(constructNT,t)}function constructNT(t){let r=false;function onConstruct(o){if(r){errorOrDestroy(t,o!==null&&o!==void 0?o:new n);return}r=true;const i=t._readableState;const a=t._writableState;const s=a||i;i&&(i.constructed=true);a&&(a.constructed=true);s.destroyed?t.emit(u,o):o?errorOrDestroy(t,o,true):e.nextTick(emitConstructNT,t)}try{t._construct((t=>{e.nextTick(onConstruct,t)}))}catch(t){e.nextTick(onConstruct,t)}}function emitConstructNT(e){e.emit(f)}function isRequest(e){return(e===null||e===void 0?void 0:e.setHeader)&&typeof e.abort==="function"}function emitCloseLegacy(e){e.emit("close")}function emitErrorCloseLegacy(t,r){t.emit("error",r);e.nextTick(emitCloseLegacy,t)}function destroyer(t,r){if(t&&!s(t)){r||l(t)||(r=new o);if(d(t)){t.socket=null;t.destroy(r)}else isRequest(t)?t.abort():isRequest(t.req)?t.req.abort():typeof t.destroy==="function"?t.destroy(r):typeof t.close==="function"?t.close():r?e.nextTick(emitErrorCloseLegacy,t,r):e.nextTick(emitCloseLegacy,t);t.destroyed||(t[a]=true)}}g={construct:construct,destroyer:destroyer,destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy};return g}var S={},v=false;function dew$g(){if(v)return S;v=true;const{ArrayIsArray:e,ObjectSetPrototypeOf:r}=dew$o();const{EventEmitter:n}=t;function Stream(e){n.call(this,e)}r(Stream.prototype,n.prototype);r(Stream,n);Stream.prototype.pipe=function(e,t){const r=this;function ondata(t){e.writable&&e.write(t)===false&&r.pause&&r.pause()}r.on("data",ondata);function ondrain(){r.readable&&r.resume&&r.resume()}e.on("drain",ondrain);if(!e._isStdio&&(!t||t.end!==false)){r.on("end",onend);r.on("close",onclose)}let o=false;function onend(){if(!o){o=true;e.end()}}function onclose(){if(!o){o=true;typeof e.destroy==="function"&&e.destroy()}}function onerror(e){cleanup();n.listenerCount(this,"error")===0&&this.emit("error",e)}prependListener(r,"error",onerror);prependListener(e,"error",onerror);function cleanup(){r.removeListener("data",ondata);e.removeListener("drain",ondrain);r.removeListener("end",onend);r.removeListener("close",onclose);r.removeListener("error",onerror);e.removeListener("error",onerror);r.removeListener("end",cleanup);r.removeListener("close",cleanup);e.removeListener("close",cleanup)}r.on("end",cleanup);r.on("close",cleanup);e.on("close",cleanup);e.emit("pipe",r);return e};function prependListener(t,r,n){if(typeof t.prependListener==="function")return t.prependListener(r,n);t._events&&t._events[r]?e(t._events[r])?t._events[r].unshift(n):t._events[r]=[n,t._events[r]]:t.on(r,n)}S={Stream:Stream,prependListener:prependListener};return S}var R={},A=false;function dew$f(){if(A)return R;A=true;const{SymbolDispose:e}=dew$o();const{AbortError:t,codes:r}=dew$l();const{isNodeStream:n,isWebStream:o,kControllerErrorFunction:i}=dew$j();const a=dew$i();const{ERR_INVALID_ARG_TYPE:s}=r;let l;const validateAbortSignal=(e,t)=>{if(typeof e!=="object"||!("aborted"in e))throw new s(t,"AbortSignal",e)};R.addAbortSignal=function addAbortSignal(e,t){validateAbortSignal(e,"signal");if(!n(t)&&!o(t))throw new s("stream",["ReadableStream","WritableStream","Stream"],t);return R.addAbortSignalNoValidate(e,t)};R.addAbortSignalNoValidate=function(r,o){if(typeof r!=="object"||!("aborted"in r))return o;const s=n(o)?()=>{o.destroy(new t(void 0,{cause:r.reason}))}:()=>{o[i](new t(void 0,{cause:r.reason}))};if(r.aborted)s();else{l=l||dew$m().addAbortListener;const t=l(r,s);a(o,t[e])}return o};return R}var T={},k=false;function dew$e(){if(k)return T;k=true;const{StringPrototypeSlice:t,SymbolIterator:r,TypedArrayPrototypeSet:n,Uint8Array:o}=dew$o();const{Buffer:i}=e();const{inspect:a}=dew$m();T=class BufferList{constructor(){this.head=null;this.tail=null;this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t;this.tail=t;++this.length}unshift(e){const t={data:e,next:this.head};this.length===0&&(this.tail=t);this.head=t;++this.length}shift(){if(this.length===0)return;const e=this.head.data;this.length===1?this.head=this.tail=null:this.head=this.head.next;--this.length;return e}clear(){this.head=this.tail=null;this.length=0}join(e){if(this.length===0)return"";let t=this.head;let r=""+t.data;while((t=t.next)!==null)r+=e+t.data;return r}concat(e){if(this.length===0)return i.alloc(0);const t=i.allocUnsafe(e>>>0);let r=this.head;let o=0;while(r){n(t,r.data,o);o+=r.data.length;r=r.next}return t}consume(e,t){const r=this.head.data;if(e<r.length){const t=r.slice(0,e);this.head.data=r.slice(e);return t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[r](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="";let n=this.head;let o=0;do{const i=n.data;if(!(e>i.length)){if(e===i.length){r+=i;++o;n.next?this.head=n.next:this.head=this.tail=null}else{r+=t(i,0,e);this.head=n;n.data=t(i,e)}break}r+=i;e-=i.length;++o}while((n=n.next)!==null);this.length-=o;return r}_getBuffer(e){const t=i.allocUnsafe(e);const r=e;let a=this.head;let s=0;do{const i=a.data;if(!(e>i.length)){if(e===i.length){n(t,i,r-e);++s;a.next?this.head=a.next:this.head=this.tail=null}else{n(t,new o(i.buffer,i.byteOffset,e),r-e);this.head=a;a.data=i.slice(e)}break}n(t,i,r-e);e-=i.length;++s}while((a=a.next)!==null);this.length-=s;return t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return a(this,{...t,depth:0,customInspect:false})}};return T}var $={},D=false;function dew$d(){if(D)return $;D=true;const{MathFloor:e,NumberIsInteger:t}=dew$o();const{validateInteger:r}=dew$k();const{ERR_INVALID_ARG_VALUE:n}=dew$l().codes;let o=16384;let i=16;function highWaterMarkFrom(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function getDefaultHighWaterMark(e){return e?i:o}function setDefaultHighWaterMark(e,t){r(t,"value",0);e?i=t:o=t}function getHighWaterMark(r,o,i,a){const s=highWaterMarkFrom(o,a,i);if(s!=null){if(!t(s)||s<0){const e=a?`options.${i}`:"options.highWaterMark";throw new n(e,s)}return e(s)}return getDefaultHighWaterMark(r.objectMode)}$={getHighWaterMark:getHighWaterMark,getDefaultHighWaterMark:getDefaultHighWaterMark,setDefaultHighWaterMark:setDefaultHighWaterMark};return $}var N={},M=false;function dew$c(){if(M)return N;M=true;const t=r;const{PromisePrototypeThen:n,SymbolAsyncIterator:o,SymbolIterator:i}=dew$o();const{Buffer:a}=e();const{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:l}=dew$l().codes;function from(e,r,d){let u;if(typeof r==="string"||r instanceof a)return new e({objectMode:true,...d,read(){this.push(r);this.push(null)}});let f;if(r&&r[o]){f=true;u=r[o]()}else{if(!r||!r[i])throw new s("iterable",["Iterable"],r);f=false;u=r[i]()}const c=new e({objectMode:true,highWaterMark:1,...d});let b=false;c._read=function(){if(!b){b=true;next()}};c._destroy=function(e,r){n(close(e),(()=>t.nextTick(r,e)),(n=>t.nextTick(r,n||e)))};async function close(e){const t=e!==void 0&&e!==null;const r=typeof u.throw==="function";if(t&&r){const{value:t,done:r}=await u.throw(e);await t;if(r)return}if(typeof u.return==="function"){const{value:e}=await u.return();await e}}async function next(){for(;;){try{const{value:e,done:t}=f?await u.next():u.next();if(t)c.push(null);else{const t=e&&typeof e.then==="function"?await e:e;if(t===null){b=false;throw new l}if(c.push(t))continue;b=false}}catch(e){c.destroy(e)}break}}return c}N=from;return N}var W={},I=false;var P=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;function dew$b(){if(I)return W;I=true;const o=r;const{ArrayPrototypeIndexOf:i,NumberIsInteger:a,NumberIsNaN:s,NumberParseInt:l,ObjectDefineProperties:d,ObjectKeys:u,ObjectSetPrototypeOf:f,Promise:c,SafeSet:b,SymbolAsyncDispose:h,SymbolAsyncIterator:p,Symbol:w}=dew$o();W=Readable;Readable.ReadableState=ReadableState;const{EventEmitter:y}=t;const{Stream:m,prependListener:g}=dew$g();const{Buffer:_}=e();const{addAbortSignal:S}=dew$f();const v=dew$i();let R=dew$m().debuglog("stream",(e=>{R=e}));const A=dew$e();const T=dew$h();const{getHighWaterMark:k,getDefaultHighWaterMark:$}=dew$d();const{aggregateTwoErrors:D,codes:{ERR_INVALID_ARG_TYPE:N,ERR_METHOD_NOT_IMPLEMENTED:M,ERR_OUT_OF_RANGE:O,ERR_STREAM_PUSH_AFTER_EOF:L,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:j},AbortError:x}=dew$l();const{validateObject:C}=dew$k();const F=w("kPaused");const{StringDecoder:B}=n;const U=dew$c();f(Readable.prototype,m.prototype);f(Readable,m);const nop=()=>{};const{errorOrDestroy:H}=T;const V=1;const G=2;const q=4;const Y=8;const z=16;const K=32;const J=64;const X=128;const Z=256;const Q=512;const ee=1024;const te=2048;const re=4096;const ne=8192;const oe=16384;const ie=32768;const ae=65536;const se=1<<17;const le=1<<18;function makeBitMapDescriptor(e){return{enumerable:false,get(){return((this||P).state&e)!==0},set(t){t?(this||P).state|=e:(this||P).state&=~e}}}d(ReadableState.prototype,{objectMode:makeBitMapDescriptor(V),ended:makeBitMapDescriptor(G),endEmitted:makeBitMapDescriptor(q),reading:makeBitMapDescriptor(Y),constructed:makeBitMapDescriptor(z),sync:makeBitMapDescriptor(K),needReadable:makeBitMapDescriptor(J),emittedReadable:makeBitMapDescriptor(X),readableListening:makeBitMapDescriptor(Z),resumeScheduled:makeBitMapDescriptor(Q),errorEmitted:makeBitMapDescriptor(ee),emitClose:makeBitMapDescriptor(te),autoDestroy:makeBitMapDescriptor(re),destroyed:makeBitMapDescriptor(ne),closed:makeBitMapDescriptor(oe),closeEmitted:makeBitMapDescriptor(ie),multiAwaitDrain:makeBitMapDescriptor(ae),readingMore:makeBitMapDescriptor(se),dataEmitted:makeBitMapDescriptor(le)});function ReadableState(e,t,r){typeof r!=="boolean"&&(r=t instanceof dew$8());(this||P).state=te|re|z|K;e&&e.objectMode&&((this||P).state|=V);r&&e&&e.readableObjectMode&&((this||P).state|=V);(this||P).highWaterMark=e?k(this||P,e,"readableHighWaterMark",r):$(false);(this||P).buffer=new A;(this||P).length=0;(this||P).pipes=[];(this||P).flowing=null;(this||P)[F]=null;e&&e.emitClose===false&&((this||P).state&=~te);e&&e.autoDestroy===false&&((this||P).state&=~re);(this||P).errored=null;(this||P).defaultEncoding=e&&e.defaultEncoding||"utf8";(this||P).awaitDrainWriters=null;(this||P).decoder=null;(this||P).encoding=null;if(e&&e.encoding){(this||P).decoder=new B(e.encoding);(this||P).encoding=e.encoding}}function Readable(e){if(!((this||P)instanceof Readable))return new Readable(e);const t=(this||P)instanceof dew$8();(this||P)._readableState=new ReadableState(e,this||P,t);if(e){typeof e.read==="function"&&((this||P)._read=e.read);typeof e.destroy==="function"&&((this||P)._destroy=e.destroy);typeof e.construct==="function"&&((this||P)._construct=e.construct);e.signal&&!t&&S(e.signal,this||P)}m.call(this||P,e);T.construct(this||P,(()=>{(this||P)._readableState.needReadable&&maybeReadMore(this||P,(this||P)._readableState)}))}Readable.prototype.destroy=T.destroy;Readable.prototype._undestroy=T.undestroy;Readable.prototype._destroy=function(e,t){t(e)};Readable.prototype[y.captureRejectionSymbol]=function(e){this.destroy(e)};Readable.prototype[h]=function(){let e;if(!(this||P).destroyed){e=(this||P).readableEnded?null:new x;this.destroy(e)}return new c(((t,r)=>v(this||P,(n=>n&&n!==e?r(n):t(null)))))};Readable.prototype.push=function(e,t){return readableAddChunk(this||P,e,t,false)};Readable.prototype.unshift=function(e,t){return readableAddChunk(this||P,e,t,true)};function readableAddChunk(e,t,r,n){R("readableAddChunk",t);const o=e._readableState;let i;if((o.state&V)===0)if(typeof t==="string"){r=r||o.defaultEncoding;if(o.encoding!==r)if(n&&o.encoding)t=_.from(t,r).toString(o.encoding);else{t=_.from(t,r);r=""}}else if(t instanceof _)r="";else if(m._isUint8Array(t)){t=m._uint8ArrayToBuffer(t);r=""}else t!=null&&(i=new N("chunk",["string","Buffer","Uint8Array"],t));if(i)H(e,i);else if(t===null){o.state&=~Y;onEofChunk(e,o)}else if((o.state&V)!==0||t&&t.length>0)if(n)if((o.state&q)!==0)H(e,new j);else{if(o.destroyed||o.errored)return false;addChunk(e,o,t,true)}else if(o.ended)H(e,new L);else{if(o.destroyed||o.errored)return false;o.state&=~Y;if(o.decoder&&!r){t=o.decoder.write(t);o.objectMode||t.length!==0?addChunk(e,o,t,false):maybeReadMore(e,o)}else addChunk(e,o,t,false)}else if(!n){o.state&=~Y;maybeReadMore(e,o)}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function addChunk(e,t,r,n){if(t.flowing&&t.length===0&&!t.sync&&e.listenerCount("data")>0){(t.state&ae)!==0?t.awaitDrainWriters.clear():t.awaitDrainWriters=null;t.dataEmitted=true;e.emit("data",r)}else{t.length+=t.objectMode?1:r.length;n?t.buffer.unshift(r):t.buffer.push(r);(t.state&J)!==0&&emitReadable(e)}maybeReadMore(e,t)}Readable.prototype.isPaused=function(){const e=(this||P)._readableState;return e[F]===true||e.flowing===false};Readable.prototype.setEncoding=function(e){const t=new B(e);(this||P)._readableState.decoder=t;(this||P)._readableState.encoding=(this||P)._readableState.decoder.encoding;const r=(this||P)._readableState.buffer;let n="";for(const e of r)n+=t.write(e);r.clear();n!==""&&r.push(n);(this||P)._readableState.length=n.length;return this||P};const de=1073741824;function computeNewHighWaterMark(e){if(e>de)throw new O("size","<= 1GiB",e);e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++;return e}function howMuchToRead(e,t){return e<=0||t.length===0&&t.ended?0:(t.state&V)!==0?1:s(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}Readable.prototype.read=function(e){R("read",e);e===void 0?e=NaN:a(e)||(e=l(e,10));const t=(this||P)._readableState;const r=e;e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e));e!==0&&(t.state&=~X);if(e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended)){R("read: emitReadable",t.length,t.ended);t.length===0&&t.ended?endReadable(this||P):emitReadable(this||P);return null}e=howMuchToRead(e,t);if(e===0&&t.ended){t.length===0&&endReadable(this||P);return null}let n=(t.state&J)!==0;R("need readable",n);if(t.length===0||t.length-e<t.highWaterMark){n=true;R("length less than watermark",n)}if(t.ended||t.reading||t.destroyed||t.errored||!t.constructed){n=false;R("reading, ended or constructing",n)}else if(n){R("do read");t.state|=Y|K;t.length===0&&(t.state|=J);try{this._read(t.highWaterMark)}catch(e){H(this||P,e)}t.state&=~K;t.reading||(e=howMuchToRead(r,t))}let o;o=e>0?fromList(e,t):null;if(o===null){t.needReadable=t.length<=t.highWaterMark;e=0}else{t.length-=e;t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null}if(t.length===0){t.ended||(t.needReadable=true);r!==e&&t.ended&&endReadable(this||P)}if(o!==null&&!t.errorEmitted&&!t.closeEmitted){t.dataEmitted=true;this.emit("data",o)}return o};function onEofChunk(e,t){R("onEofChunk");if(!t.ended){if(t.decoder){const e=t.decoder.end();if(e&&e.length){t.buffer.push(e);t.length+=t.objectMode?1:e.length}}t.ended=true;if(t.sync)emitReadable(e);else{t.needReadable=false;t.emittedReadable=true;emitReadable_(e)}}}function emitReadable(e){const t=e._readableState;R("emitReadable",t.needReadable,t.emittedReadable);t.needReadable=false;if(!t.emittedReadable){R("emitReadable",t.flowing);t.emittedReadable=true;o.nextTick(emitReadable_,e)}}function emitReadable_(e){const t=e._readableState;R("emitReadable_",t.destroyed,t.length,t.ended);if(!t.destroyed&&!t.errored&&(t.length||t.ended)){e.emit("readable");t.emittedReadable=false}t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark;flow(e)}function maybeReadMore(e,t){if(!t.readingMore&&t.constructed){t.readingMore=true;o.nextTick(maybeReadMore_,e,t)}}function maybeReadMore_(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0)){const r=t.length;R("maybeReadMore read 0");e.read(0);if(r===t.length)break}t.readingMore=false}Readable.prototype._read=function(e){throw new M("_read()")};Readable.prototype.pipe=function(e,t){const r=this||P;const n=(this||P)._readableState;if(n.pipes.length===1&&!n.multiAwaitDrain){n.multiAwaitDrain=true;n.awaitDrainWriters=new b(n.awaitDrainWriters?[n.awaitDrainWriters]:[])}n.pipes.push(e);R("pipe count=%d opts=%j",n.pipes.length,t);const i=(!t||t.end!==false)&&e!==o.stdout&&e!==o.stderr;const a=i?onend:unpipe;n.endEmitted?o.nextTick(a):r.once("end",a);e.on("unpipe",onunpipe);function onunpipe(e,t){R("onunpipe");if(e===r&&t&&t.hasUnpiped===false){t.hasUnpiped=true;cleanup()}}function onend(){R("onend");e.end()}let s;let l=false;function cleanup(){R("cleanup");e.removeListener("close",onclose);e.removeListener("finish",onfinish);s&&e.removeListener("drain",s);e.removeListener("error",onerror);e.removeListener("unpipe",onunpipe);r.removeListener("end",onend);r.removeListener("end",unpipe);r.removeListener("data",ondata);l=true;s&&n.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&s()}function pause(){if(!l){if(n.pipes.length===1&&n.pipes[0]===e){R("false write response, pause",0);n.awaitDrainWriters=e;n.multiAwaitDrain=false}else if(n.pipes.length>1&&n.pipes.includes(e)){R("false write response, pause",n.awaitDrainWriters.size);n.awaitDrainWriters.add(e)}r.pause()}if(!s){s=pipeOnDrain(r,e);e.on("drain",s)}}r.on("data",ondata);function ondata(t){R("ondata");const r=e.write(t);R("dest.write",r);r===false&&pause()}function onerror(t){R("onerror",t);unpipe();e.removeListener("error",onerror);if(e.listenerCount("error")===0){const r=e._writableState||e._readableState;r&&!r.errorEmitted?H(e,t):e.emit("error",t)}}g(e,"error",onerror);function onclose(){e.removeListener("finish",onfinish);unpipe()}e.once("close",onclose);function onfinish(){R("onfinish");e.removeListener("close",onclose);unpipe()}e.once("finish",onfinish);function unpipe(){R("unpipe");r.unpipe(e)}e.emit("pipe",r);if(e.writableNeedDrain===true)pause();else if(!n.flowing){R("pipe resume");r.resume()}return e};function pipeOnDrain(e,t){return function pipeOnDrainFunctionResult(){const r=e._readableState;if(r.awaitDrainWriters===t){R("pipeOnDrain",1);r.awaitDrainWriters=null}else if(r.multiAwaitDrain){R("pipeOnDrain",r.awaitDrainWriters.size);r.awaitDrainWriters.delete(t)}r.awaitDrainWriters&&r.awaitDrainWriters.size!==0||!e.listenerCount("data")||e.resume()}}Readable.prototype.unpipe=function(e){const t=(this||P)._readableState;const r={hasUnpiped:false};if(t.pipes.length===0)return this||P;if(!e){const e=t.pipes;t.pipes=[];this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this||P,{hasUnpiped:false});return this||P}const n=i(t.pipes,e);if(n===-1)return this||P;t.pipes.splice(n,1);t.pipes.length===0&&this.pause();e.emit("unpipe",this||P,r);return this||P};Readable.prototype.on=function(e,t){const r=m.prototype.on.call(this||P,e,t);const n=(this||P)._readableState;if(e==="data"){n.readableListening=this.listenerCount("readable")>0;n.flowing!==false&&this.resume()}else if(e==="readable"&&!n.endEmitted&&!n.readableListening){n.readableListening=n.needReadable=true;n.flowing=false;n.emittedReadable=false;R("on readable",n.length,n.reading);n.length?emitReadable(this||P):n.reading||o.nextTick(nReadingNextTick,this||P)}return r};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.removeListener=function(e,t){const r=m.prototype.removeListener.call(this||P,e,t);e==="readable"&&o.nextTick(updateReadableListening,this||P);return r};Readable.prototype.off=Readable.prototype.removeListener;Readable.prototype.removeAllListeners=function(e){const t=m.prototype.removeAllListeners.apply(this||P,arguments);e!=="readable"&&e!==void 0||o.nextTick(updateReadableListening,this||P);return t};function updateReadableListening(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0;t.resumeScheduled&&t[F]===false?t.flowing=true:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function nReadingNextTick(e){R("readable nexttick read 0");e.read(0)}Readable.prototype.resume=function(){const e=(this||P)._readableState;if(!e.flowing){R("resume");e.flowing=!e.readableListening;resume(this||P,e)}e[F]=false;return this||P};function resume(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;o.nextTick(resume_,e,t)}}function resume_(e,t){R("resume",t.reading);t.reading||e.read(0);t.resumeScheduled=false;e.emit("resume");flow(e);t.flowing&&!t.reading&&e.read(0)}Readable.prototype.pause=function(){R("call pause flowing=%j",(this||P)._readableState.flowing);if((this||P)._readableState.flowing!==false){R("pause");(this||P)._readableState.flowing=false;this.emit("pause")}(this||P)._readableState[F]=true;return this||P};function flow(e){const t=e._readableState;R("flow",t.flowing);while(t.flowing&&e.read()!==null);}Readable.prototype.wrap=function(e){let t=false;e.on("data",(r=>{if(!this.push(r)&&e.pause){t=true;e.pause()}}));e.on("end",(()=>{this.push(null)}));e.on("error",(e=>{H(this||P,e)}));e.on("close",(()=>{this.destroy()}));e.on("destroy",(()=>{this.destroy()}));(this||P)._read=()=>{if(t&&e.resume){t=false;e.resume()}};const r=u(e);for(let t=1;t<r.length;t++){const n=r[t];(this||P)[n]===void 0&&typeof e[n]==="function"&&((this||P)[n]=e[n].bind(e))}return this||P};Readable.prototype[p]=function(){return streamToAsyncIterator(this||P)};Readable.prototype.iterator=function(e){e!==void 0&&C(e,"options");return streamToAsyncIterator(this||P,e)};function streamToAsyncIterator(e,t){typeof e.read!=="function"&&(e=Readable.wrap(e,{objectMode:true}));const r=createAsyncIterator(e,t);r.stream=e;return r}async function*createAsyncIterator(e,t){let r=nop;function next(t){if((this||P)===e){r();r=nop}else r=t}e.on("readable",next);let n;const o=v(e,{writable:false},(e=>{n=e?D(n,e):null;r();r=nop}));try{while(true){const t=e.destroyed?null:e.read();if(t!==null)yield t;else{if(n)throw n;if(n===null)return;await new c(next)}}}catch(e){n=D(n,e);throw n}finally{if(!n&&(t===null||t===void 0?void 0:t.destroyOnReturn)===false||n!==void 0&&!e._readableState.autoDestroy){e.off("readable",next);o()}else T.destroyer(e,null)}}d(Readable.prototype,{readable:{__proto__:null,get(){const e=(this||P)._readableState;return!!e&&e.readable!==false&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){(this||P)._readableState&&((this||P)._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:false,get:function(){return(this||P)._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:false,get:function(){return!!((this||P)._readableState.readable!==false&&((this||P)._readableState.destroyed||(this||P)._readableState.errored)&&!(this||P)._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:false,get:function(){return(this||P)._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:false,get:function(){return(this||P)._readableState&&(this||P)._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:false,get:function(){return(this||P)._readableState.flowing},set:function(e){(this||P)._readableState&&((this||P)._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:false,get(){return(this||P)._readableState.length}},readableObjectMode:{__proto__:null,enumerable:false,get(){return!!(this||P)._readableState&&(this||P)._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:false,get(){return(this||P)._readableState?(this||P)._readableState.encoding:null}},errored:{__proto__:null,enumerable:false,get(){return(this||P)._readableState?(this||P)._readableState.errored:null}},closed:{__proto__:null,get(){return!!(this||P)._readableState&&(this||P)._readableState.closed}},destroyed:{__proto__:null,enumerable:false,get(){return!!(this||P)._readableState&&(this||P)._readableState.destroyed},set(e){(this||P)._readableState&&((this||P)._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:false,get(){return!!(this||P)._readableState&&(this||P)._readableState.endEmitted}}});d(ReadableState.prototype,{pipesCount:{__proto__:null,get(){return(this||P).pipes.length}},paused:{__proto__:null,get(){return(this||P)[F]!==false},set(e){(this||P)[F]=!!e}}});Readable._fromList=fromList;function fromList(e,t){if(t.length===0)return null;let r;if(t.objectMode)r=t.buffer.shift();else if(!e||e>=t.length){r=t.decoder?t.buffer.join(""):t.buffer.length===1?t.buffer.first():t.buffer.concat(t.length);t.buffer.clear()}else r=t.buffer.consume(e,t.decoder);return r}function endReadable(e){const t=e._readableState;R("endReadable",t.endEmitted);if(!t.endEmitted){t.ended=true;o.nextTick(endReadableNT,t,e)}}function endReadableNT(e,t){R("endReadableNT",e.endEmitted,e.length);if(!e.errored&&!e.closeEmitted&&!e.endEmitted&&e.length===0){e.endEmitted=true;t.emit("end");if(t.writable&&t.allowHalfOpen===false)o.nextTick(endWritableNT,t);else if(e.autoDestroy){const e=t._writableState;const r=!e||e.autoDestroy&&(e.finished||e.writable===false);r&&t.destroy()}}}function endWritableNT(e){const t=e.writable&&!e.writableEnded&&!e.destroyed;t&&e.end()}Readable.from=function(e,t){return U(Readable,e,t)};let ue;function lazyWebStreams(){ue===void 0&&(ue={});return ue}Readable.fromWeb=function(e,t){return lazyWebStreams().newStreamReadableFromReadableStream(e,t)};Readable.toWeb=function(e,t){return lazyWebStreams().newReadableStreamFromStreamReadable(e,t)};Readable.wrap=function(e,t){var r,n;return new Readable({objectMode:(r=(n=e.readableObjectMode)!==null&&n!==void 0?n:e.objectMode)===null||r===void 0||r,...t,destroy(t,r){T.destroyer(e,t);r(t)}}).wrap(e)};return W}var O={},L=false;var j=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;function dew$a(){if(L)return O;L=true;const n=r;const{ArrayPrototypeSlice:o,Error:i,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:l,ObjectSetPrototypeOf:d,StringPrototypeToLowerCase:u,Symbol:f,SymbolHasInstance:c}=dew$o();O=Writable;Writable.WritableState=WritableState;const{EventEmitter:b}=t;const h=dew$g().Stream;const{Buffer:p}=e();const w=dew$h();const{addAbortSignal:y}=dew$f();const{getHighWaterMark:m,getDefaultHighWaterMark:g}=dew$d();const{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:R,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:T,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:$,ERR_UNKNOWN_ENCODING:D}=dew$l().codes;const{errorOrDestroy:N}=w;d(Writable.prototype,h.prototype);d(Writable,h);function nop(){}const M=f("kOnFinished");function WritableState(e,t,r){typeof r!=="boolean"&&(r=t instanceof dew$8());(this||j).objectMode=!!(e&&e.objectMode);r&&((this||j).objectMode=(this||j).objectMode||!!(e&&e.writableObjectMode));(this||j).highWaterMark=e?m(this||j,e,"writableHighWaterMark",r):g(false);(this||j).finalCalled=false;(this||j).needDrain=false;(this||j).ending=false;(this||j).ended=false;(this||j).finished=false;(this||j).destroyed=false;const n=!!(e&&e.decodeStrings===false);(this||j).decodeStrings=!n;(this||j).defaultEncoding=e&&e.defaultEncoding||"utf8";(this||j).length=0;(this||j).writing=false;(this||j).corked=0;(this||j).sync=true;(this||j).bufferProcessing=false;(this||j).onwrite=onwrite.bind(void 0,t);(this||j).writecb=null;(this||j).writelen=0;(this||j).afterWriteTickInfo=null;resetBuffer(this||j);(this||j).pendingcb=0;(this||j).constructed=true;(this||j).prefinished=false;(this||j).errorEmitted=false;(this||j).emitClose=!e||e.emitClose!==false;(this||j).autoDestroy=!e||e.autoDestroy!==false;(this||j).errored=null;(this||j).closed=false;(this||j).closeEmitted=false;(this||j)[M]=[]}function resetBuffer(e){e.buffered=[];e.bufferedIndex=0;e.allBuffers=true;e.allNoop=true}WritableState.prototype.getBuffer=function getBuffer(){return o((this||j).buffered,(this||j).bufferedIndex)};s(WritableState.prototype,"bufferedRequestCount",{__proto__:null,get(){return(this||j).buffered.length-(this||j).bufferedIndex}});function Writable(e){const t=(this||j)instanceof dew$8();if(!t&&!a(Writable,this||j))return new Writable(e);(this||j)._writableState=new WritableState(e,this||j,t);if(e){typeof e.write==="function"&&((this||j)._write=e.write);typeof e.writev==="function"&&((this||j)._writev=e.writev);typeof e.destroy==="function"&&((this||j)._destroy=e.destroy);typeof e.final==="function"&&((this||j)._final=e.final);typeof e.construct==="function"&&((this||j)._construct=e.construct);e.signal&&y(e.signal,this||j)}h.call(this||j,e);w.construct(this||j,(()=>{const e=(this||j)._writableState;e.writing||clearBuffer(this||j,e);finishMaybe(this||j,e)}))}s(Writable,c,{__proto__:null,value:function(e){return!!a(this||j,e)||(this||j)===Writable&&(e&&e._writableState instanceof WritableState)}});Writable.prototype.pipe=function(){N(this||j,new R)};function _write(e,t,r,o){const i=e._writableState;if(typeof r==="function"){o=r;r=i.defaultEncoding}else{if(r){if(r!=="buffer"&&!p.isEncoding(r))throw new D(r)}else r=i.defaultEncoding;typeof o!=="function"&&(o=nop)}if(t===null)throw new k;if(!i.objectMode)if(typeof t==="string"){if(i.decodeStrings!==false){t=p.from(t,r);r="buffer"}}else if(t instanceof p)r="buffer";else{if(!h._isUint8Array(t))throw new _("chunk",["string","Buffer","Uint8Array"],t);t=h._uint8ArrayToBuffer(t);r="buffer"}let a;i.ending?a=new $:i.destroyed&&(a=new A("write"));if(a){n.nextTick(o,a);N(e,a,true);return a}i.pendingcb++;return writeOrBuffer(e,i,t,r,o)}Writable.prototype.write=function(e,t,r){return _write(this||j,e,t,r)===true};Writable.prototype.cork=function(){(this||j)._writableState.corked++};Writable.prototype.uncork=function(){const e=(this||j)._writableState;if(e.corked){e.corked--;e.writing||clearBuffer(this||j,e)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(e){typeof e==="string"&&(e=u(e));if(!p.isEncoding(e))throw new D(e);(this||j)._writableState.defaultEncoding=e;return this||j};function writeOrBuffer(e,t,r,n,o){const i=t.objectMode?1:r.length;t.length+=i;const a=t.length<t.highWaterMark;a||(t.needDrain=true);if(t.writing||t.corked||t.errored||!t.constructed){t.buffered.push({chunk:r,encoding:n,callback:o});t.allBuffers&&n!=="buffer"&&(t.allBuffers=false);t.allNoop&&o!==nop&&(t.allNoop=false)}else{t.writelen=i;t.writecb=o;t.writing=true;t.sync=true;e._write(r,n,t.onwrite);t.sync=false}return a&&!t.errored&&!t.destroyed}function doWrite(e,t,r,n,o,i,a){t.writelen=n;t.writecb=a;t.writing=true;t.sync=true;t.destroyed?t.onwrite(new A("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite);t.sync=false}function onwriteError(e,t,r,n){--t.pendingcb;n(r);errorBuffer(t);N(e,r)}function onwrite(e,t){const r=e._writableState;const o=r.sync;const i=r.writecb;if(typeof i==="function"){r.writing=false;r.writecb=null;r.length-=r.writelen;r.writelen=0;if(t){t.stack;r.errored||(r.errored=t);e._readableState&&!e._readableState.errored&&(e._readableState.errored=t);o?n.nextTick(onwriteError,e,r,t,i):onwriteError(e,r,t,i)}else{r.buffered.length>r.bufferedIndex&&clearBuffer(e,r);if(o)if(r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i)r.afterWriteTickInfo.count++;else{r.afterWriteTickInfo={count:1,cb:i,stream:e,state:r};n.nextTick(afterWriteTick,r.afterWriteTickInfo)}else afterWrite(e,r,1,i)}}else N(e,new v)}function afterWriteTick({stream:e,state:t,count:r,cb:n}){t.afterWriteTickInfo=null;return afterWrite(e,t,r,n)}function afterWrite(e,t,r,n){const o=!t.ending&&!e.destroyed&&t.length===0&&t.needDrain;if(o){t.needDrain=false;e.emit("drain")}while(r-- >0){t.pendingcb--;n()}t.destroyed&&errorBuffer(t);finishMaybe(e,t)}function errorBuffer(e){if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){var t;const{chunk:n,callback:o}=e.buffered[r];const i=e.objectMode?1:n.length;e.length-=i;o((t=e.errored)!==null&&t!==void 0?t:new A("write"))}const r=e[M].splice(0);for(let t=0;t<r.length;t++){var n;r[t]((n=e.errored)!==null&&n!==void 0?n:new A("end"))}resetBuffer(e)}function clearBuffer(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:r,bufferedIndex:n,objectMode:i}=t;const a=r.length-n;if(!a)return;let s=n;t.bufferProcessing=true;if(a>1&&e._writev){t.pendingcb-=a-1;const n=t.allNoop?nop:e=>{for(let t=s;t<r.length;++t)r[t].callback(e)};const i=t.allNoop&&s===0?r:o(r,s);i.allBuffers=t.allBuffers;doWrite(e,t,true,t.length,i,"",n);resetBuffer(t)}else{do{const{chunk:n,encoding:o,callback:a}=r[s];r[s++]=null;const l=i?1:n.length;doWrite(e,t,false,l,n,o,a)}while(s<r.length&&!t.writing);if(s===r.length)resetBuffer(t);else if(s>256){r.splice(0,s);t.bufferedIndex=0}else t.bufferedIndex=s}t.bufferProcessing=false}Writable.prototype._write=function(e,t,r){if(!(this||j)._writev)throw new S("_write()");this._writev([{chunk:e,encoding:t}],r)};Writable.prototype._writev=null;Writable.prototype.end=function(e,t,r){const o=(this||j)._writableState;if(typeof e==="function"){r=e;e=null;t=null}else if(typeof t==="function"){r=t;t=null}let a;if(e!==null&&e!==void 0){const r=_write(this||j,e,t);r instanceof i&&(a=r)}if(o.corked){o.corked=1;this.uncork()}if(a);else if(o.errored||o.ending)o.finished?a=new T("end"):o.destroyed&&(a=new A("end"));else{o.ending=true;finishMaybe(this||j,o,true);o.ended=true}typeof r==="function"&&(a||o.finished?n.nextTick(r,a):o[M].push(r));return this||j};function needFinish(e){return e.ending&&!e.destroyed&&e.constructed&&e.length===0&&!e.errored&&e.buffered.length===0&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function callFinal(e,t){let r=false;function onFinish(o){if(r)N(e,o!==null&&o!==void 0?o:v());else{r=true;t.pendingcb--;if(o){const r=t[M].splice(0);for(let e=0;e<r.length;e++)r[e](o);N(e,o,t.sync)}else if(needFinish(t)){t.prefinished=true;e.emit("prefinish");t.pendingcb++;n.nextTick(finish,e,t)}}}t.sync=true;t.pendingcb++;try{e._final(onFinish)}catch(e){onFinish(e)}t.sync=false}function prefinish(e,t){if(!t.prefinished&&!t.finalCalled)if(typeof e._final!=="function"||t.destroyed){t.prefinished=true;e.emit("prefinish")}else{t.finalCalled=true;callFinal(e,t)}}function finishMaybe(e,t,r){if(needFinish(t)){prefinish(e,t);if(t.pendingcb===0)if(r){t.pendingcb++;n.nextTick(((e,t)=>{needFinish(t)?finish(e,t):t.pendingcb--}),e,t)}else if(needFinish(t)){t.pendingcb++;finish(e,t)}}}function finish(e,t){t.pendingcb--;t.finished=true;const r=t[M].splice(0);for(let e=0;e<r.length;e++)r[e]();e.emit("finish");if(t.autoDestroy){const t=e._readableState;const r=!t||t.autoDestroy&&(t.endEmitted||t.readable===false);r&&e.destroy()}}l(Writable.prototype,{closed:{__proto__:null,get(){return!!(this||j)._writableState&&(this||j)._writableState.closed}},destroyed:{__proto__:null,get(){return!!(this||j)._writableState&&(this||j)._writableState.destroyed},set(e){(this||j)._writableState&&((this||j)._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=(this||j)._writableState;return!!e&&e.writable!==false&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){(this||j)._writableState&&((this||j)._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!(this||j)._writableState&&(this||j)._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!(this||j)._writableState&&(this||j)._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return(this||j)._writableState&&(this||j)._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!(this||j)._writableState&&(this||j)._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=(this||j)._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return(this||j)._writableState&&(this||j)._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return(this||j)._writableState?(this||j)._writableState.corked:0}},writableLength:{__proto__:null,get(){return(this||j)._writableState&&(this||j)._writableState.length}},errored:{__proto__:null,enumerable:false,get(){return(this||j)._writableState?(this||j)._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:false,get:function(){return!!((this||j)._writableState.writable!==false&&((this||j)._writableState.destroyed||(this||j)._writableState.errored)&&!(this||j)._writableState.finished)}}});const W=w.destroy;Writable.prototype.destroy=function(e,t){const r=(this||j)._writableState;!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[M].length)&&n.nextTick(errorBuffer,r);W.call(this||j,e,t);return this||j};Writable.prototype._undestroy=w.undestroy;Writable.prototype._destroy=function(e,t){t(e)};Writable.prototype[b.captureRejectionSymbol]=function(e){this.destroy(e)};let I;function lazyWebStreams(){I===void 0&&(I={});return I}Writable.fromWeb=function(e,t){return lazyWebStreams().newStreamWritableFromWritableStream(e,t)};Writable.toWeb=function(e){return lazyWebStreams().newWritableStreamFromStreamWritable(e)};return O}var x={},C=false;function dew$9(){if(C)return x;C=true;const t=r;const n=e();const{isReadable:o,isWritable:i,isIterable:a,isNodeStream:s,isReadableNodeStream:l,isWritableNodeStream:d,isDuplexNodeStream:u,isReadableStream:f,isWritableStream:c}=dew$j();const b=dew$i();const{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:w}}=dew$l();const{destroyer:y}=dew$h();const m=dew$8();const g=dew$b();const _=dew$a();const{createDeferredPromise:S}=dew$m();const v=dew$c();const R=globalThis.Blob||n.Blob;const A=typeof R!=="undefined"?function isBlob(e){return e instanceof R}:function isBlob(e){return false};const T=globalThis.AbortController||dew$n().AbortController;const{FunctionPrototypeCall:k}=dew$o();class Duplexify extends m{constructor(e){super(e);if((e===null||e===void 0?void 0:e.readable)===false){this._readableState.readable=false;this._readableState.ended=true;this._readableState.endEmitted=true}if((e===null||e===void 0?void 0:e.writable)===false){this._writableState.writable=false;this._writableState.ending=true;this._writableState.ended=true;this._writableState.finished=true}}}x=function duplexify(e,r){if(u(e))return e;if(l(e))return _duplexify({readable:e});if(d(e))return _duplexify({writable:e});if(s(e))return _duplexify({writable:false,readable:false});if(f(e))return _duplexify({readable:g.fromWeb(e)});if(c(e))return _duplexify({writable:_.fromWeb(e)});if(typeof e==="function"){const{value:n,write:o,final:i,destroy:s}=fromAsyncGen(e);if(a(n))return v(Duplexify,n,{objectMode:true,write:o,final:i,destroy:s});const l=n===null||n===void 0?void 0:n.then;if(typeof l==="function"){let e;const r=k(l,n,(e=>{if(e!=null)throw new w("nully","body",e)}),(t=>{y(e,t)}));return e=new Duplexify({objectMode:true,readable:false,write:o,final(e){i((async()=>{try{await r;t.nextTick(e,null)}catch(r){t.nextTick(e,r)}}))},destroy:s})}throw new w("Iterable, AsyncIterable or AsyncFunction",r,n)}if(A(e))return duplexify(e.arrayBuffer());if(a(e))return v(Duplexify,e,{objectMode:true,writable:false});if(f(e===null||e===void 0?void 0:e.readable)&&c(e===null||e===void 0?void 0:e.writable))return Duplexify.fromWeb(e);if(typeof(e===null||e===void 0?void 0:e.writable)==="object"||typeof(e===null||e===void 0?void 0:e.readable)==="object"){const t=e!==null&&e!==void 0&&e.readable?l(e===null||e===void 0?void 0:e.readable)?e===null||e===void 0?void 0:e.readable:duplexify(e.readable):void 0;const r=e!==null&&e!==void 0&&e.writable?d(e===null||e===void 0?void 0:e.writable)?e===null||e===void 0?void 0:e.writable:duplexify(e.writable):void 0;return _duplexify({readable:t,writable:r})}const n=e===null||e===void 0?void 0:e.then;if(typeof n==="function"){let t;k(n,e,(e=>{e!=null&&t.push(e);t.push(null)}),(e=>{y(t,e)}));return t=new Duplexify({objectMode:true,writable:false,read(){}})}throw new p(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function fromAsyncGen(e){let{promise:r,resolve:n}=S();const o=new T;const i=o.signal;const a=e(async function*(){while(true){const e=r;r=null;const{chunk:o,done:a,cb:s}=await e;t.nextTick(s);if(a)return;if(i.aborted)throw new h(void 0,{cause:i.reason});({promise:r,resolve:n}=S());yield o}}(),{signal:i});return{value:a,write(e,t,r){const o=n;n=null;o({chunk:e,done:false,cb:r})},final(e){const t=n;n=null;t({done:true,cb:e})},destroy(e,t){o.abort();t(e)}}}function _duplexify(e){const t=e.readable&&typeof e.readable.read!=="function"?g.wrap(e.readable):e.readable;const r=e.writable;let n=!!o(t);let a=!!i(r);let s;let l;let d;let u;let f;function onfinished(e){const t=u;u=null;t?t(e):e&&f.destroy(e)}f=new Duplexify({readableObjectMode:!!(t!==null&&t!==void 0&&t.readableObjectMode),writableObjectMode:!!(r!==null&&r!==void 0&&r.writableObjectMode),readable:n,writable:a});if(a){b(r,(e=>{a=false;e&&y(t,e);onfinished(e)}));f._write=function(e,t,n){r.write(e,t)?n():s=n};f._final=function(e){r.end();l=e};r.on("drain",(function(){if(s){const e=s;s=null;e()}}));r.on("finish",(function(){if(l){const e=l;l=null;e()}}))}if(n){b(t,(e=>{n=false;e&&y(t,e);onfinished(e)}));t.on("readable",(function(){if(d){const e=d;d=null;e()}}));t.on("end",(function(){f.push(null)}));f._read=function(){while(true){const e=t.read();if(e===null){d=f._read;return}if(!f.push(e))return}}}f._destroy=function(e,n){e||u===null||(e=new h);d=null;s=null;l=null;if(u===null)n(e);else{u=n;y(r,e);y(t,e)}};return f}return x}var F={},B=false;function dew$8(){if(B)return F;B=true;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=dew$o();F=Duplex;const o=dew$b();const i=dew$a();n(Duplex.prototype,o.prototype);n(Duplex,o);{const e=r(i.prototype);for(let t=0;t<e.length;t++){const r=e[t];Duplex.prototype[r]||(Duplex.prototype[r]=i.prototype[r])}}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);o.call(this,e);i.call(this,e);if(e){this.allowHalfOpen=e.allowHalfOpen!==false;if(e.readable===false){this._readableState.readable=false;this._readableState.ended=true;this._readableState.endEmitted=true}if(e.writable===false){this._writableState.writable=false;this._writableState.ending=true;this._writableState.ended=true;this._writableState.finished=true}}else this.allowHalfOpen=true}e(Duplex.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){if(this._readableState&&this._writableState){this._readableState.destroyed=e;this._writableState.destroyed=e}}}});let a;function lazyWebStreams(){a===void 0&&(a={});return a}Duplex.fromWeb=function(e,t){return lazyWebStreams().newStreamDuplexFromReadableWritablePair(e,t)};Duplex.toWeb=function(e){return lazyWebStreams().newReadableWritablePairFromDuplex(e)};let s;Duplex.from=function(e){s||(s=dew$9());return s(e,"body")};return F}var U={},H=false;function dew$7(){if(H)return U;H=true;const{ObjectSetPrototypeOf:e,Symbol:t}=dew$o();U=Transform;const{ERR_METHOD_NOT_IMPLEMENTED:r}=dew$l().codes;const n=dew$8();const{getHighWaterMark:o}=dew$d();e(Transform.prototype,n.prototype);e(Transform,n);const i=t("kCallback");function Transform(e){if(!(this instanceof Transform))return new Transform(e);const t=e?o(this,e,"readableHighWaterMark",true):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0});n.call(this,e);this._readableState.sync=false;this[i]=null;if(e){typeof e.transform==="function"&&(this._transform=e.transform);typeof e.flush==="function"&&(this._flush=e.flush)}this.on("prefinish",prefinish)}function final(e){if(typeof this._flush!=="function"||this.destroyed){this.push(null);e&&e()}else this._flush(((t,r)=>{if(t)e?e(t):this.destroy(t);else{r!=null&&this.push(r);this.push(null);e&&e()}}))}function prefinish(){this._final!==final&&final.call(this)}Transform.prototype._final=final;Transform.prototype._transform=function(e,t,n){throw new r("_transform()")};Transform.prototype._write=function(e,t,r){const n=this._readableState;const o=this._writableState;const a=n.length;this._transform(e,t,((e,t)=>{if(e)r(e);else{t!=null&&this.push(t);o.ended||a===n.length||n.length<n.highWaterMark?r():this[i]=r}}))};Transform.prototype._read=function(){if(this[i]){const e=this[i];this[i]=null;e()}};return U}var V={},G=false;function dew$6(){if(G)return V;G=true;const{ObjectSetPrototypeOf:e}=dew$o();V=PassThrough;const t=dew$7();e(PassThrough.prototype,t.prototype);e(PassThrough,t);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);t.call(this,e)}PassThrough.prototype._transform=function(e,t,r){r(null,e)};return V}var q={},Y=false;function dew$5(){if(Y)return q;Y=true;const e=r;const{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:o,SymbolDispose:i}=dew$o();const a=dew$i();const{once:s}=dew$m();const l=dew$h();const d=dew$8();const{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:c,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:h,ERR_STREAM_PREMATURE_CLOSE:p},AbortError:w}=dew$l();const{validateFunction:y,validateAbortSignal:m}=dew$k();const{isIterable:g,isReadable:_,isReadableNodeStream:S,isNodeStream:v,isTransformStream:R,isWebStream:A,isReadableStream:T,isReadableFinished:k}=dew$j();const $=globalThis.AbortController||dew$n().AbortController;let D;let N;let M;function destroyer(e,t,r){let n=false;e.on("close",(()=>{n=true}));const o=a(e,{readable:t,writable:r},(e=>{n=!e}));return{destroy:t=>{if(!n){n=true;l.destroyer(e,t||new h("pipe"))}},cleanup:o}}function popCallback(e){y(e[e.length-1],"streams[stream.length - 1]");return e.pop()}function makeAsyncIterable(e){if(g(e))return e;if(S(e))return fromReadable(e);throw new f("val",["Readable","Iterable","AsyncIterable"],e)}async function*fromReadable(e){N||(N=dew$b());yield*N.prototype[o].call(e)}async function pumpToNode(e,t,r,{end:o}){let i;let s=null;const resume=e=>{e&&(i=e);if(s){const e=s;s=null;e()}};const wait=()=>new n(((e,t)=>{i?t(i):s=()=>{i?t(i):e()}}));t.on("drain",resume);const l=a(t,{readable:false},resume);try{t.writableNeedDrain&&await wait();for await(const r of e)t.write(r)||await wait();if(o){t.end();await wait()}r()}catch(e){r(i!==e?u(i,e):e)}finally{l();t.off("drain",resume)}}async function pumpToWeb(e,t,r,{end:n}){R(t)&&(t=t.writable);const o=t.getWriter();try{for await(const t of e){await o.ready;o.write(t).catch((()=>{}))}await o.ready;n&&await o.close();r()}catch(e){try{await o.abort(e);r(e)}catch(e){r(e)}}}function pipeline(...e){return pipelineImpl(e,s(popCallback(e)))}function pipelineImpl(r,n,o){r.length===1&&t(r[0])&&(r=r[0]);if(r.length<2)throw new b("streams");const a=new $;const s=a.signal;const l=o===null||o===void 0?void 0:o.signal;const u=[];m(l,"options.signal");function abort(){finishImpl(new w)}M=M||dew$m().addAbortListener;let h;l&&(h=M(l,abort));let p;let y;const k=[];let N=0;function finish(e){finishImpl(e,--N===0)}function finishImpl(t,r){var o;!t||p&&p.code!=="ERR_STREAM_PREMATURE_CLOSE"||(p=t);if(p||r){while(k.length)k.shift()(p);(o=h)===null||o===void 0?void 0:o[i]();a.abort();if(r){p||u.forEach((e=>e()));e.nextTick(n,p,y)}}}let W;for(let O=0;O<r.length;O++){const L=r[O];const j=O<r.length-1;const x=O>0;const C=j||(o===null||o===void 0?void 0:o.end)!==false;const F=O===r.length-1;if(v(L)){if(C){const{destroy:B,cleanup:U}=destroyer(L,j,x);k.push(B);_(L)&&F&&u.push(U)}function onError(e){e&&e.name!=="AbortError"&&e.code!=="ERR_STREAM_PREMATURE_CLOSE"&&finish(e)}L.on("error",onError);_(L)&&F&&u.push((()=>{L.removeListener("error",onError)}))}if(O===0)if(typeof L==="function"){W=L({signal:s});if(!g(W))throw new c("Iterable, AsyncIterable or Stream","source",W)}else W=g(L)||S(L)||R(L)?L:d.from(L);else if(typeof L==="function"){if(R(W)){var I;W=makeAsyncIterable((I=W)===null||I===void 0?void 0:I.readable)}else W=makeAsyncIterable(W);W=L(W,{signal:s});if(j){if(!g(W,true))throw new c("AsyncIterable",`transform[${O-1}]`,W)}else{var P;D||(D=dew$6());const H=new D({objectMode:true});const V=(P=W)===null||P===void 0?void 0:P.then;if(typeof V==="function"){N++;V.call(W,(t=>{y=t;t!=null&&H.write(t);C&&H.end();e.nextTick(finish)}),(t=>{H.destroy(t);e.nextTick(finish,t)}))}else if(g(W,true)){N++;pumpToNode(W,H,finish,{end:C})}else{if(!T(W)&&!R(W))throw new c("AsyncIterable or Promise","destination",W);{const Y=W.readable||W;N++;pumpToNode(Y,H,finish,{end:C})}}W=H;const{destroy:G,cleanup:q}=destroyer(W,false,true);k.push(G);F&&u.push(q)}}else if(v(L)){if(S(W)){N+=2;const z=pipe(W,L,finish,{end:C});_(L)&&F&&u.push(z)}else if(R(W)||T(W)){const K=W.readable||W;N++;pumpToNode(K,L,finish,{end:C})}else{if(!g(W))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],W);N++;pumpToNode(W,L,finish,{end:C})}W=L}else if(A(L)){if(S(W)){N++;pumpToWeb(makeAsyncIterable(W),L,finish,{end:C})}else if(T(W)||g(W)){N++;pumpToWeb(W,L,finish,{end:C})}else{if(!R(W))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],W);N++;pumpToWeb(W.readable,L,finish,{end:C})}W=L}else W=d.from(L)}(s!==null&&s!==void 0&&s.aborted||l!==null&&l!==void 0&&l.aborted)&&e.nextTick(abort);return W}function pipe(t,r,n,{end:o}){let i=false;r.on("close",(()=>{i||n(new p)}));t.pipe(r,{end:false});if(o){function endFn(){i=true;r.end()}k(t)?e.nextTick(endFn):t.once("end",endFn)}else n();a(t,{readable:true,writable:false},(e=>{const r=t._readableState;e&&e.code==="ERR_STREAM_PREMATURE_CLOSE"&&r&&r.ended&&!r.errored&&!r.errorEmitted?t.once("end",n).once("error",n):n(e)}));return a(r,{readable:false,writable:true},n)}q={pipelineImpl:pipelineImpl,pipeline:pipeline};return q}var z={},K=false;function dew$4(){if(K)return z;K=true;const{pipeline:e}=dew$5();const t=dew$8();const{destroyer:r}=dew$h();const{isNodeStream:n,isReadable:o,isWritable:i,isWebStream:a,isTransformStream:s,isWritableStream:l,isReadableStream:d}=dew$j();const{AbortError:u,codes:{ERR_INVALID_ARG_VALUE:f,ERR_MISSING_ARGS:c}}=dew$l();const b=dew$i();z=function compose(...h){if(h.length===0)throw new c("streams");if(h.length===1)return t.from(h[0]);const p=[...h];typeof h[0]==="function"&&(h[0]=t.from(h[0]));if(typeof h[h.length-1]==="function"){const e=h.length-1;h[e]=t.from(h[e])}for(let e=0;e<h.length;++e)if(n(h[e])||a(h[e])){if(e<h.length-1&&!(o(h[e])||d(h[e])||s(h[e])))throw new f(`streams[${e}]`,p[e],"must be readable");if(e>0&&!(i(h[e])||l(h[e])||s(h[e])))throw new f(`streams[${e}]`,p[e],"must be writable")}let w;let y;let m;let g;let _;function onfinished(e){const t=g;g=null;t?t(e):e?_.destroy(e):A||R||_.destroy()}const S=h[0];const v=e(h,onfinished);const R=!!(i(S)||l(S)||s(S));const A=!!(o(v)||d(v)||s(v));_=new t({writableObjectMode:!!(S!==null&&S!==void 0&&S.writableObjectMode),readableObjectMode:!!(v!==null&&v!==void 0&&v.readableObjectMode),writable:R,readable:A});if(R){if(n(S)){_._write=function(e,t,r){S.write(e,t)?r():w=r};_._final=function(e){S.end();y=e};S.on("drain",(function(){if(w){const e=w;w=null;e()}}))}else if(a(S)){const e=s(S)?S.writable:S;const t=e.getWriter();_._write=async function(e,r,n){try{await t.ready;t.write(e).catch((()=>{}));n()}catch(e){n(e)}};_._final=async function(e){try{await t.ready;t.close().catch((()=>{}));y=e}catch(t){e(t)}}}const e=s(v)?v.readable:v;b(e,(()=>{if(y){const e=y;y=null;e()}}))}if(A)if(n(v)){v.on("readable",(function(){if(m){const e=m;m=null;e()}}));v.on("end",(function(){_.push(null)}));_._read=function(){while(true){const e=v.read();if(e===null){m=_._read;return}if(!_.push(e))return}}}else if(a(v)){const e=s(v)?v.readable:v;const t=e.getReader();_._read=async function(){while(true)try{const{value:e,done:r}=await t.read();if(!_.push(e))return;if(r){_.push(null);return}}catch{return}}}_._destroy=function(e,t){e||g===null||(e=new u);m=null;w=null;y=null;if(g===null)t(e);else{g=t;n(v)&&r(v,e)}};return _};return z}var J={},X=false;function dew$3(){if(X)return J;X=true;const e=globalThis.AbortController||dew$n().AbortController;const{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:r,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:o},AbortError:i}=dew$l();const{validateAbortSignal:a,validateInteger:s,validateObject:l}=dew$k();const d=dew$o().Symbol("kWeak");const u=dew$o().Symbol("kResistStopPropagation");const{finished:f}=dew$i();const c=dew$4();const{addAbortSignalNoValidate:b}=dew$f();const{isWritable:h,isNodeStream:p}=dew$j();const{deprecate:w}=dew$m();const{ArrayPrototypePush:y,Boolean:m,MathFloor:g,Number:_,NumberIsNaN:S,Promise:v,PromiseReject:R,PromiseResolve:A,PromisePrototypeThen:T,Symbol:k}=dew$o();const $=k("kEmpty");const D=k("kEof");function compose(e,r){r!=null&&l(r,"options");(r===null||r===void 0?void 0:r.signal)!=null&&a(r.signal,"options.signal");if(p(e)&&!h(e))throw new t("stream",e,"must be writable");const n=c(this,e);r!==null&&r!==void 0&&r.signal&&b(r.signal,n);return n}function map(e,t){if(typeof e!=="function")throw new r("fn",["Function","AsyncFunction"],e);t!=null&&l(t,"options");(t===null||t===void 0?void 0:t.signal)!=null&&a(t.signal,"options.signal");let n=1;(t===null||t===void 0?void 0:t.concurrency)!=null&&(n=g(t.concurrency));let o=n-1;(t===null||t===void 0?void 0:t.highWaterMark)!=null&&(o=g(t.highWaterMark));s(n,"options.concurrency",1);s(o,"options.highWaterMark",0);o+=n;return async function*map(){const r=dew$m().AbortSignalAny([t===null||t===void 0?void 0:t.signal].filter(m));const a=this;const s=[];const l={signal:r};let d;let u;let f=false;let c=0;function onCatch(){f=true;afterItemProcessed()}function afterItemProcessed(){c-=1;maybeResume()}function maybeResume(){if(u&&!f&&c<n&&s.length<o){u();u=null}}async function pump(){try{for await(let t of a){if(f)return;if(r.aborted)throw new i;try{t=e(t,l);if(t===$)continue;t=A(t)}catch(e){t=R(e)}c+=1;T(t,afterItemProcessed,onCatch);s.push(t);if(d){d();d=null}!f&&(s.length>=o||c>=n)&&await new v((e=>{u=e}))}s.push(D)}catch(e){const t=R(e);T(t,afterItemProcessed,onCatch);s.push(t)}finally{f=true;if(d){d();d=null}}}pump();try{while(true){while(s.length>0){const e=await s[0];if(e===D)return;if(r.aborted)throw new i;e!==$&&(yield e);s.shift();maybeResume()}await new v((e=>{d=e}))}}finally{f=true;if(u){u();u=null}}}.call(this)}function asIndexedPairs(e=void 0){e!=null&&l(e,"options");(e===null||e===void 0?void 0:e.signal)!=null&&a(e.signal,"options.signal");return async function*asIndexedPairs(){let t=0;for await(const n of this){var r;if(e!==null&&e!==void 0&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new i({cause:e.signal.reason});yield[t++,n]}}.call(this)}async function some(e,t=void 0){for await(const r of filter.call(this,e,t))return true;return false}async function every(e,t=void 0){if(typeof e!=="function")throw new r("fn",["Function","AsyncFunction"],e);return!await some.call(this,(async(...t)=>!await e(...t)),t)}async function find(e,t){for await(const r of filter.call(this,e,t))return r}async function forEach(e,t){if(typeof e!=="function")throw new r("fn",["Function","AsyncFunction"],e);async function forEachFn(t,r){await e(t,r);return $}for await(const e of map.call(this,forEachFn,t));}function filter(e,t){if(typeof e!=="function")throw new r("fn",["Function","AsyncFunction"],e);async function filterFn(t,r){return await e(t,r)?t:$}return map.call(this,filterFn,t)}class ReduceAwareErrMissingArgs extends n{constructor(){super("reduce");this.message="Reduce of an empty stream requires an initial value"}}async function reduce(t,n,o){var s;if(typeof t!=="function")throw new r("reducer",["Function","AsyncFunction"],t);o!=null&&l(o,"options");(o===null||o===void 0?void 0:o.signal)!=null&&a(o.signal,"options.signal");let c=arguments.length>1;if(o!==null&&o!==void 0&&(s=o.signal)!==null&&s!==void 0&&s.aborted){const e=new i(void 0,{cause:o.signal.reason});this.once("error",(()=>{}));await f(this.destroy(e));throw e}const b=new e;const h=b.signal;if(o!==null&&o!==void 0&&o.signal){const e={once:true,[d]:this,[u]:true};o.signal.addEventListener("abort",(()=>b.abort()),e)}let p=false;try{for await(const e of this){var w;p=true;if(o!==null&&o!==void 0&&(w=o.signal)!==null&&w!==void 0&&w.aborted)throw new i;if(c)n=await t(n,e,{signal:h});else{n=e;c=true}}if(!p&&!c)throw new ReduceAwareErrMissingArgs}finally{b.abort()}return n}async function toArray(e){e!=null&&l(e,"options");(e===null||e===void 0?void 0:e.signal)!=null&&a(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(e!==null&&e!==void 0&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new i(void 0,{cause:e.signal.reason});y(t,n)}return t}function flatMap(e,t){const r=map.call(this,e,t);return async function*flatMap(){for await(const e of r)yield*e}.call(this)}function toIntegerOrInfinity(e){e=_(e);if(S(e))return 0;if(e<0)throw new o("number",">= 0",e);return e}function drop(e,t=void 0){t!=null&&l(t,"options");(t===null||t===void 0?void 0:t.signal)!=null&&a(t.signal,"options.signal");e=toIntegerOrInfinity(e);return async function*drop(){var r;if(t!==null&&t!==void 0&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new i;for await(const r of this){var n;if(t!==null&&t!==void 0&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new i;e--<=0&&(yield r)}}.call(this)}function take(e,t=void 0){t!=null&&l(t,"options");(t===null||t===void 0?void 0:t.signal)!=null&&a(t.signal,"options.signal");e=toIntegerOrInfinity(e);return async function*take(){var r;if(t!==null&&t!==void 0&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new i;for await(const r of this){var n;if(t!==null&&t!==void 0&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new i;e-- >0&&(yield r);if(e<=0)return}}.call(this)}J.streamReturningOperators={asIndexedPairs:w(asIndexedPairs,"readable.asIndexedPairs will be removed in a future version."),drop:drop,filter:filter,flatMap:flatMap,map:map,take:take,compose:compose};J.promiseReturningOperators={every:every,forEach:forEach,reduce:reduce,toArray:toArray,some:some,find:find};return J}var Z={},Q=false;function dew$2(){if(Q)return Z;Q=true;const{ArrayPrototypePop:e,Promise:t}=dew$o();const{isIterable:r,isNodeStream:n,isWebStream:o}=dew$j();const{pipelineImpl:i}=dew$5();const{finished:a}=dew$i();dew$1();function pipeline(...a){return new t(((t,s)=>{let l;let d;const u=a[a.length-1];if(u&&typeof u==="object"&&!n(u)&&!r(u)&&!o(u)){const t=e(a);l=t.signal;d=t.end}i(a,((e,r)=>{e?s(e):t(r)}),{signal:l,end:d})}))}Z={finished:a,pipeline:pipeline};return Z}var ee={},te=false;var re=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;function dew$1(){if(te)return ee;te=true;const{Buffer:t}=e();const{ObjectDefineProperty:r,ObjectKeys:n,ReflectApply:o}=dew$o();const{promisify:{custom:i}}=dew$m();const{streamReturningOperators:a,promiseReturningOperators:s}=dew$3();const{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=dew$l();const d=dew$4();const{setDefaultHighWaterMark:u,getDefaultHighWaterMark:f}=dew$d();const{pipeline:c}=dew$5();const{destroyer:b}=dew$h();const h=dew$i();const p=dew$2();const w=dew$j();const y=ee=dew$g().Stream;y.isDestroyed=w.isDestroyed;y.isDisturbed=w.isDisturbed;y.isErrored=w.isErrored;y.isReadable=w.isReadable;y.isWritable=w.isWritable;y.Readable=dew$b();for(const g of n(a)){const _=a[g];function fn(...e){if(new.target)throw l();return y.Readable.from(o(_,this||re,e))}r(fn,"name",{__proto__:null,value:_.name});r(fn,"length",{__proto__:null,value:_.length});r(y.Readable.prototype,g,{__proto__:null,value:fn,enumerable:false,configurable:true,writable:true})}for(const S of n(s)){const v=s[S];function fn(...e){if(new.target)throw l();return o(v,this||re,e)}r(fn,"name",{__proto__:null,value:v.name});r(fn,"length",{__proto__:null,value:v.length});r(y.Readable.prototype,S,{__proto__:null,value:fn,enumerable:false,configurable:true,writable:true})}y.Writable=dew$a();y.Duplex=dew$8();y.Transform=dew$7();y.PassThrough=dew$6();y.pipeline=c;const{addAbortSignal:m}=dew$f();y.addAbortSignal=m;y.finished=h;y.destroy=b;y.compose=d;y.setDefaultHighWaterMark=u;y.getDefaultHighWaterMark=f;r(y,"promises",{__proto__:null,configurable:true,enumerable:true,get(){return p}});r(c,i,{__proto__:null,enumerable:true,get(){return p.pipeline}});r(h,i,{__proto__:null,enumerable:true,get(){return p.finished}});y.Stream=y;y._isUint8Array=function isUint8Array(e){return e instanceof Uint8Array};y._uint8ArrayToBuffer=function _uint8ArrayToBuffer(e){return t.from(e.buffer,e.byteOffset,e.byteLength)};return ee}var ne={},oe=false;function dew(){if(oe)return ne;oe=true;const e=dew$1();const t=dew$2();const r=e.Readable.destroy;ne=e.Readable;ne._uint8ArrayToBuffer=e._uint8ArrayToBuffer;ne._isUint8Array=e._isUint8Array;ne.isDisturbed=e.isDisturbed;ne.isErrored=e.isErrored;ne.isReadable=e.isReadable;ne.Readable=e.Readable;ne.Writable=e.Writable;ne.Duplex=e.Duplex;ne.Transform=e.Transform;ne.PassThrough=e.PassThrough;ne.addAbortSignal=e.addAbortSignal;ne.finished=e.finished;ne.destroy=e.destroy;ne.destroy=r;ne.pipeline=e.pipeline;ne.compose=e.compose;Object.defineProperty(e,"promises",{configurable:true,enumerable:true,get(){return t}});ne.Stream=e.Stream;ne.default=ne;return ne}const ie=dew();ie._uint8ArrayToBuffer;ie._isUint8Array;ie.isDisturbed;ie.isErrored;ie.isReadable;ie.Readable;ie.Writable;ie.Duplex;ie.Transform;ie.PassThrough;ie.addAbortSignal;ie.finished;ie.destroy;ie.pipeline;ie.compose;ie.Stream;var ae=ie.Readable;ae.wrap=function(e,t){t=Object.assign({objectMode:e.readableObjectMode!=null||e.objectMode!=null||true},t);t.destroy=function(t,r){e.destroy(t);r(t)};return new ae(t).wrap(e)};var se=ie.Writable;var le=ie.Duplex;var de=ie.Transform;var ue=ie.PassThrough;var fe=ie.finished;var ce=ie.pipeline;var be=ie.Stream;const he={finished:o(ie.finished),pipeline:o(ie.pipeline)};export{le as Duplex,ue as PassThrough,ae as Readable,be as Stream,de as Transform,se as Writable,ie as default,fe as finished,ce as pipeline,he as promises};

