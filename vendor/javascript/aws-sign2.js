import n from"crypto";import e from"url";var r={};var a=n,i=e.parse;var o=["acl","location","logging","notification","partNumber","policy","requestPayment","torrent","uploadId","uploads","versionId","versioning","versions","website"];function authorization(n){return"AWS "+n.key+":"+sign(n)}r=authorization;r.authorization=authorization;function hmacSha1(n){return a.createHmac("sha1",n.secret).update(n.message).digest("base64")}r.hmacSha1=hmacSha1;function sign(n){n.message=stringToSign(n);return hmacSha1(n)}r.sign=sign;function signQuery(n){n.message=queryStringToSign(n);return hmacSha1(n)}r.signQuery=signQuery;function stringToSign(n){var e=n.amazonHeaders||"";e&&(e+="\n");var r=[n.verb,n.md5,n.contentType,n.date?n.date.toUTCString():"",e+n.resource];return r.join("\n")}r.stringToSign=stringToSign;function queryStringToSign(n){return"GET\n\n\n"+n.date+"\n"+n.resource}r.queryStringToSign=queryStringToSign;function canonicalizeHeaders(n){var e=[],r=Object.keys(n);for(var a=0,i=r.length;a<i;++a){var o=r[a],t=n[o],o=o.toLowerCase();0===o.indexOf("x-amz")&&e.push(o+":"+t)}return e.sort().join("\n")}r.canonicalizeHeaders=canonicalizeHeaders;function canonicalizeResource(n){var e=i(n,true),r=e.pathname,a=[];Object.keys(e.query).forEach((function(n){if(~o.indexOf(n)){var r=""==e.query[n]?"":"="+encodeURIComponent(e.query[n]);a.push(n+r)}}));return r+(a.length?"?"+a.sort().join("&"):"")}r.canonicalizeResource=canonicalizeResource;var t=r;const s=r.authorization,c=r.hmacSha1,u=r.sign,g=r.signQuery,h=r.stringToSign,S=r.queryStringToSign,m=r.canonicalizeHeaders,y=r.canonicalizeResource;export default t;export{s as authorization,m as canonicalizeHeaders,y as canonicalizeResource,c as hmacSha1,S as queryStringToSign,u as sign,g as signQuery,h as stringToSign};

